(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[427],{36:(e,t,n)=>{"use strict";n.d(t,{A:()=>v,z:()=>y});var a=n(7294);const r="small_fzGKo",l="button_3lXdg",i="disabled_1jdDa",s="blue_2acgV",c="grey_1js2e",o="green_1t2Yr",d="red_2Ya5J",m="link_1judM";var u=n(4184),E=n.n(u),f=n(3216);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const p={green:o,blue:s,grey:c,link:m,red:d,greyLink:`${m} ${c}`};function h(e){const{className:t,color:n="grey",small:a=!1,disabled:s}=e;return E()(l,p[n],a&&r,s&&i,t)}function y(e){const{children:t,small:n,color:r,...l}=e;return a.createElement("button",g({type:"button"},l,{className:h(e)}),t)}function v(e){const{children:t,small:n,color:r,disabled:l,...i}=e;return a.createElement(f.r,g({},i,{className:h(e)}),t)}},6604:(e,t,n)=>{"use strict";n.d(t,{t:()=>s,H:()=>c});var a=n(7294),r=n(5977);function l(e){return a.createElement(r.AW,{render:function(t){return t.staticContext&&(t.staticContext.links=t.staticContext.links||[],t.staticContext.links.push(e)),null}})}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function s(e){const{image:t,className:n,alt:r,preload:s=!1,lazy:c=!0,width:o,height:d,...m}=e,u=s&&a.createElement(a.Fragment,null,a.createElement(l,{rel:"preload",as:"image",type:"image/webp",href:t.webpUrl}),a.createElement(l,{rel:"preload",as:"image",type:"image/jpeg",href:t.sourceUrl})),[E,f]=function(e,t,n){if(0===e.width&&0===e.height)return[t||150,n||150];if(void 0===t&&void 0===n)return[e.width,e.height];const a=e.width/e.height;if(void 0===t&&void 0!==n)return[n*a,n];if(void 0!==t&&void 0===n)return[t,t/a];if(void 0!==t&&void 0!==n)return[t,n];throw new Error("Unreachable")}(t,o,d);return a.createElement("picture",{className:n},u,a.createElement("source",{src:t.webpUrl,type:"image/webp"}),a.createElement("img",i({},m,{src:t.sourceUrl,alt:r,width:E,height:f,loading:c?"lazy":void 0})))}function c(e){const{images:t,sizes:n,className:r,alt:l,lazy:i=!0}=e,s=t.map((e=>`${e.webpUrl} ${e.width||150}w`)).join(", "),c=t.map((e=>`${e.sourceUrl} ${e.width||150}w`)).join(", ");return a.createElement("picture",{className:r},a.createElement("source",{type:"image/webp",src:t[0].webpUrl,srcSet:s}),a.createElement("img",{src:t[0].sourceUrl,srcSet:c,sizes:n,alt:l,loading:i?"lazy":void 0}))}},4490:(e,t,n)=>{"use strict";n.d(t,{$:()=>d});var a=n(7294),r=n(4184),l=n.n(r),i=n(1048);const s="spinner_3qsuZ",c="large_270Js",o="show_17nbC";function d(e){const{className:t,large:n,delay:r=0}=e,[d,m]=a.useState(r<=0);a.useEffect((function(){const e=setTimeout((()=>m(!0)),r);return()=>clearTimeout(e)}),[]);const u=l()(s,t,n&&c,d&&o);return a.createElement(i.$jN,{className:u})}},4815:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Il,paths:()=>_l});var a=n(6359),r=n(7294),l=n(3197),i=n(5977),s=n(5962),c=n(175),o=n(1946),d=n(4379),m=n(4490),u=n(8272);const E="loading_3BAqT";function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function g(e){const{result:t,minHeight:n=0,component:a,loadingComponent:l,title:i,...s}=e;return t.loading?l?r.createElement(l,null):r.createElement(u.$0,{title:i},r.createElement("div",{className:E,style:{minHeight:n,lineHeight:`${n}px`}},r.createElement(m.$,null))):t.error?r.createElement(u.$0,{title:i},t.error.message):r.createElement(a,f({},t.data?.release,s))}var p=n(1742),h=n(3931);function y(e=1/0){const t=(0,h.T)();return function(e){const[t,n]=r.useState(!1);return r.useEffect((function(){if(e===1/0)return()=>{};const t=setTimeout((()=>n(!0)),e);return()=>clearTimeout(t)}),[]),t}(e)||t.isExact?t.currency:null}var v=n(4901),_=n(4184),b=n.n(_),w=n(4999),C=n(1048),I=n(5253),T=n(2107);const N="inner_3X7e_",R="label_2wIjW",k="close_1Uae1",x="sticky_8060C",$={ad_top:"ad_top_1GBnA ad_1qeN9",ad_bottom:"ad_bottom_3Oh2o ad_1qeN9",ad_flexa:"ad_flexa_185KE ad_1qeN9 no_mobile_3pqqA",ad_right:"ad_right_2spJU ad_1qeN9 no_desktop_kjFK7",ad_right_b:"ad_right_b_N9yzl ad_1qeN9",ad_video:"ad_video_1R1G1"},S="lngtd",D=["ad","display-ad","ads-here","ads-ad"];function A(e,t={}){const{sticky:n=!1}=t;return function(t){const{children:l}=t,{i18n:s}=(0,p.G)(),[c,o]=r.useState(n),{user:d,loading:m}=(0,T.f0)(),u=function(){const e=(0,i.TH)();return w.v.DISABLE_ADS||e.search.includes("disable_ads=1")}()||m||null!==d;var E;if(E=u,(0,I.c)((function(){if(document.getElementById(S)||E||!w.v.AD_SCRIPT)return;const e=document.createElement("script");e.src=w.v.AD_SCRIPT,e.id=S,document.body.append(e)}),[E]),u)return null;const f=b()($[e],c&&x,n&&c&&"sticky_footer",n&&!c&&"sticky_footer_dismissed",...D);return r.createElement("div",{className:f,role:"marquee","aria-label":s._({id:"Advertisement"})},n&&c&&r.createElement("button",{onClick:function(){o(!1)},className:k,title:s._({id:"Hide Ad"})},r.createElement(C.x8P,null)),r.createElement("div",{className:R},r.createElement(a.Trans,{id:"Ad"})),l,r.createElement("div",{id:e,className:N}))}}const F=A("ad_top"),P=A("ad_flexa"),O=A("ad_right"),M=A("ad_right_b"),L=A("ad_bottom",{sticky:!0}),B=A("ad_video");var j=n(5303),V=n(6365);function U(e){if(!e)return!1;return e.findIndex((function(e){return!(!e.artist||!("discogsId"in e.artist))&&194===e.artist.discogsId}))>=0}function z(e){const t=e.split("-");return parseInt(t[0],10)}function H(e){const t=z(e);return 10*Math.floor(t/10)}function G(e){return r.useEffect((function(){const{discogsId:t,isOffensive:n,genres:a,styles:r,formats:l,primaryArtists:i,released:s,labels:c,masterRelease:o}=e;if(n)return;const d=(i??[]).map((function(e){if(!e.artist||!("discogsId"in e.artist))return null;const{discogsId:t}=e.artist;return`a${t}`})),m=(c??[]).map((function(e){if(!("discogsId"in e.label))return null;const{discogsId:t}=e.label;return`l${t}`})),u=s?z(s):void 0,E=l?.map((e=>e.name))??[],f=i&&!U(i)&&i.map((function(e,t){const n=e.nameVariation||e.artist?.name||"",a=t<i.length-1?function(e){if(!e.joiningText||","===e.joiningText)return", ";return` ${e.joiningText} `}(e):"";return`${n.replace(/ \(\d+\)/,"")}${a}`})).join(""),g=[`r${t}`,...o?[`m${o.discogsId}`]:[],...d,...m],p={event:"ad-targeting",artist:f&&f.length>0?f:void 0,year:u,ids:g.filter((e=>Boolean(e))),genres:a??[],styles:r??[],formats:E};(0,V.j)(p)}),[]),null}function W(e,t){const n=[];for(let a=0;a<=t.length-1;a++)n.push(t[a]),a<t.length-1&&n.push(e);return n}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const Y={year:"numeric",month:"short",day:"numeric"},Q=[{year:"numeric"},{year:"numeric",month:"short"},Y];function K(e,t,n){return t.toLocaleDateString(e,{timeZone:"UTC",...n})}function X(e){const{value:t,...n}=e,a=J(),l=function(e){return e.split("-").map((function(e,t){const n=0===t?4:2;return e.padStart(n,"0")})).join("-").replace(/(-00)?-00/,"")}(t),i=new Date(l),s=l.match(/-/g)?.length??0,c=Q[s];return c?r.createElement("time",q({},n,{dateTime:l}),K(a,i,c)):null}function Z(e){const{value:t,...n}=e,a=J();return r.createElement("time",q({},n,{dateTime:t.toISOString().replace(/T.*$/,"")}),K(a,t,Y))}function J(){const{language:e}=(0,p.G)(),[t,n]=r.useState(e);return(0,I.c)((function(){navigator.language.startsWith(e)&&n(navigator.language)})),t}var ee=n(3216);let te;function ne(e){switch(e){case"CD":case"CDr":case"DVD":case"Cassette":case"File":case"Vinyl":return te[e];case"BoxSet":case"Box Set":return te.BoxSet;case"Blu-ray":case"Bluray":return te.BluRay;default:return te.Unknown}}!function(e){e.CD="CD",e.CDr="CDr",e.DVD="DVD",e.Cassette="Cassette",e.File="File",e.Vinyl="Vinyl",e.BoxSet="Box Set",e.BluRay="Blu-ray",e.Unknown="Unknown"}(te||(te={}));var ae=n(6604);const re={[te.CD]:C.Cd,[te.CDr]:C.Cd,[te.DVD]:C.Cd,[te.Cassette]:C.ylE,[te.File]:C.qxA,[te.Vinyl]:C.I4h,[te.BoxSet]:C.Cd,[te.BluRay]:C.Cd,[te.Unknown]:null};function le(e){const{format:t,width:n}=e,a=re[t];return null===a?null:r.createElement(a,{style:{width:n}})}const ie="image_3rzgk bezel_2NSgk",se="fallback_mOqMx bezel_2NSgk";function ce(e){const{image:t,format:n,alt:a,lazy:l,preload:i}=e,{i18n:s}=(0,p.G)(),c="string"==typeof a?a:s._(a),o=ne(n??"Vinyl");return t?r.createElement("div",{className:ie},r.createElement(ae.t,{image:t,lazy:l,alt:c,preload:i})):r.createElement("div",{className:se},r.createElement(le,{format:o,width:150}))}function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function de(e){const{imageId:t,...n}=e,a={...(0,i.TH)(),pathname:`${(0,i.$B)().url}/image/${t}`};return r.createElement(ee.r,oe({internal:!0,replace:!0,href:a},n))}const me="more_8jbxp",ue="thumbnail_32ntz",Ee="add_2r-XM",fe={name:"Vinyl"};function ge(e){const{title:t,formats:n=[],images:l}=e,s=l.edges[0]?.node,c=(0,i.$B)(),[o=fe]=n,d={id:"{title}{descriptions} album cover",values:{title:t,descriptions:o.description?` (${o.description.join(", ")})`:""}};if(!s){const e=`${c.url}/images/update`;return r.createElement("div",null,r.createElement(ee.r,{href:e},r.createElement(ce,{format:o.name,alt:d})),r.createElement("p",{className:Ee},r.createElement(ee.r,{href:e},r.createElement(a.Trans,{id:"Add An Image"}))))}return r.createElement("div",{className:me},r.createElement(de,{imageId:s.id,className:ue},r.createElement(ce,{image:s.thumbnail,format:o.name,alt:d,preload:!0,lazy:!1})),r.createElement("p",null,l.totalCount>1&&r.createElement(de,{imageId:s.id,className:ue},r.createElement(a.Trans,{id:"More images"}))))}var pe=n(4177),he=n(6939);function ye(e){return e.replace(/[()+.!,/]/g,"").replace(/ /g,"-")}const ve="container_2AwjH",_e="tooltip_3ZPo-",be="content_20n0M",we="close_2cvNK",Ce={bottom:"bottom_3Mcq2",bottomEnd:"bottom_end_2kGEY",right:"right_1SE7a",top:"top_1kYzH",topEnd:"top_end_PMKFf",left:"left_2ZtXX"};function Ie(e){const{children:t,title:n,onClose:a,position:l,id:i,open:s=!1}=e;return s?r.createElement("div",{className:b()(_e,Ce[l]),role:"tooltip",id:i},n&&r.createElement("h3",null,n),r.createElement("button",{onClick:a,className:we},r.createElement(C.x8P,null)),r.createElement("div",{className:be},t)):null}function Te(e){const{children:t}=e;return r.createElement("div",{className:ve},t)}const Ne="link_15cpV",Re="inner_2nU7U";function ke(e){const{dispatch:t,artist:n,open:l}=e;if(!n||!("discogsId"in n)||!n.profile)return null;const{name:i,discogsId:s,profile:c}=n,o=`/search?type=artist&q=${encodeURIComponent(i.replace(" "," OR "))}`;return r.createElement(Ie,{open:l,title:i,id:`artist-${s}`,onClose:function(){t({type:"close"})},position:"right"},r.createElement("div",{className:Re},r.createElement("h4",null,r.createElement(a.Trans,{id:"Real Name"})),i,c?.html&&r.createElement(r.Fragment,null,r.createElement("h4",null,r.createElement(a.Trans,{id:"Profile"})),r.createElement("div",{dangerouslySetInnerHTML:{__html:c.html}})),r.createElement("h4",null,r.createElement(a.Trans,{id:"Search"})),r.createElement(a.Trans,{id:"Search for variations of <0>{name}</0>",values:{name:i},components:[r.createElement(ee.r,{href:o})]})))}const xe=(0,pe.E)((function(e){const{artist:t,nameVariation:n,open:a,info:l,dispatch:i}=e;if(!t&&!n)return null;const s=t&&"discogsId"in t&&t.discogsId,c=t&&s&&`/artist/${s}-${ye(t.name)}`,o=n&&""!==n?n:t?.name,d=c?r.createElement(ee.r,{href:c,title:t?.name,className:Ne},o):r.createElement("span",{title:t?.name},o);return r.createElement("span",{className:Ne,onMouseLeave:function(){i({type:"leave"})},onMouseEnter:function(){i({type:"hover"})}},d,n&&"*",r.createElement(ke,{artist:l,dispatch:i,open:a}))}),(function(e,t,n){switch(n.type){case"open":return{...t,open:!0};case"close":return{...t,open:!1};case"hover":return{...t,hover:!0};case"leave":return{...t,hover:!1};case"info":return{...t,info:n.info};default:return t}}),(function(e){return{open:!1,hover:!1,info:e.artist&&"profile"in e.artist?e.artist:void 0}}),(function(e,t,n){r.useEffect((function(){if(t.hover){const e=setTimeout((()=>n({type:"open"})),500);return()=>clearTimeout(e)}if(t.open){const e=setTimeout((()=>n({type:"close"})),500);return()=>clearTimeout(e)}return()=>{}}),[t.hover]);const[a,{data:l}]=(0,he.U)();r.useEffect((function(){t.open&&e.artist&&"discogsId"in e.artist&&!t.info&&a({variables:{discogsId:e.artist.discogsId}})}),[t.open,e.artist]),r.useEffect((function(){l?.artist&&n({type:"info",info:l.artist})}),[l])}));function $e(e){const{artists:t}=e;return r.createElement(r.Fragment,null,t.map(((e,n)=>e.artist&&r.createElement(r.Fragment,{key:"discogsId"in e.artist?e.artist.discogsId:e.artist.name},r.createElement(xe,{artist:e.artist,nameVariation:e.nameVariation}),n<t.length-1&&function(e){return e.joiningText&&","!==e.joiningText?` ${e.joiningText} `:", "}(e)))))}function Se(e){const{labels:t}=e;return r.createElement(r.Fragment,null,W(", ",t.map((function(e){const{label:t,catalogNumber:n}=e,{name:a}=t,l="discogsId"in t&&t.discogsId,i=l&&`/label/${l}-${ye(a)}`,s=i?r.createElement(ee.r,{href:i},a):r.createElement("span",null,a),c=`${l||a}-${n??"_"}`;return r.createElement(r.Fragment,{key:c},s,n&&` – ${n}`)}))))}const De="format_item_3SAJn",Ae={[te.CD]:r.createElement(a.Trans,{id:"CD"}),[te.CDr]:r.createElement(a.Trans,{id:"CDr"}),[te.DVD]:r.createElement(a.Trans,{id:"DVD"}),[te.Cassette]:r.createElement(a.Trans,{id:"Cassette"}),[te.File]:r.createElement(a.Trans,{id:"File"}),[te.Vinyl]:r.createElement(a.Trans,{id:"Vinyl"}),[te.BoxSet]:r.createElement(a.Trans,{id:"Box Set"}),[te.BluRay]:r.createElement(a.Trans,{id:"Blu-ray"}),[te.Unknown]:r.createElement(a.Trans,{id:"Unknown"})};function Fe(e){const{formats:t}=e;return r.createElement(r.Fragment,null,t.map((e=>r.createElement("div",{key:e.name,className:De},e.quantity&&"1"!==e.quantity&&`${e.quantity} x `,r.createElement(ee.r,{href:`/search/?format_exact=${e.name}`},Ae[ne(e.name)]),e.description&&", ",e.description?.join(", "),e.text&&r.createElement("i",null,", ",e.text)))))}function Pe(e){const{series:t}=e;return r.createElement(r.Fragment,null,W(", ",t.map((function(e,t){const{label:n,catalogNumber:a}=e,{name:l}=n,i="discogsId"in n&&`/label/${n.discogsId}-${ye(l)}`,s=i?r.createElement(ee.r,{href:i},l):l;return r.createElement(r.Fragment,{key:"discogsId"in n?n.discogsId:l},s,a&&` – ${a}`)}))))}Pe.defaultProps={series:[]};const Oe="body__xbaR",Me="thumbnail_2eT6J",Le="header_3FV2N",Be="info_2OHV7",je="lineitem_2U49R",Ve="label_2GDTZ",Ue="content_3IW3p",ze="format_3yO6t";function He(e){return e.labelRole===he.b7.Label}function Ge(e){return e.labelRole===he.b7.Series}function We(e){const{primaryArtists:t=[],country:n,formats:l=[],genres:i=[],labels:s=[],styles:c=[],title:o,released:d}=e,m=s.filter(He),u=s.filter(Ge);return r.createElement("div",{id:"release-header",className:Oe},r.createElement("div",{className:Me},r.createElement(ge,e)),r.createElement("h1",{className:Le},r.createElement($e,{artists:t})," – ",o),r.createElement("div",{className:Be},r.createElement("div",{className:je},r.createElement("div",{className:Ve},r.createElement(a.Trans,{id:"Label"}),":"),r.createElement("div",{className:Ue},r.createElement(Se,{labels:m}))),u.length>0&&r.createElement("div",{className:je},r.createElement("div",{className:Ve},r.createElement(a.Trans,{id:"Series"}),":"),r.createElement("div",{className:Ue},r.createElement(Pe,{series:u}))),r.createElement("div",{className:ze},r.createElement("div",{className:Ve},r.createElement(a.Trans,{id:"Format"}),":"),r.createElement("div",{className:Ue},r.createElement(Fe,{formats:l}))),r.createElement("div",{className:je},r.createElement("div",{className:Ve},r.createElement(a.Trans,{id:"Country"}),":"),n&&r.createElement("div",{className:Ue},r.createElement(ee.r,{href:`/search/?country=${n}`},n))),r.createElement("div",{className:je},r.createElement("div",{className:Ve},r.createElement(a.Trans,{id:"Released"}),":"),d&&r.createElement("div",{className:Ue},r.createElement(ee.r,{href:`/search/?decade=${H(d)}&year=${z(d)}`},r.createElement(X,{value:d})))),r.createElement("div",{className:je},r.createElement("div",{className:Ve},r.createElement(a.Trans,{id:"Genre"}),":"),r.createElement("div",{className:Ue},W(", ",i.map((e=>r.createElement(ee.r,{key:e,href:`/genre/${e.toLowerCase()}`},e)))))),r.createElement("div",{className:je},r.createElement("div",{className:Ve},r.createElement(a.Trans,{id:"Style"}),":"),r.createElement("div",{className:Ue},W(", ",c.map((e=>r.createElement(ee.r,{key:e,href:`/style/${e.toLowerCase()}`},e))))))))}function qe(e){const t={};for(const n of e){const{creditRole:e=""}=n;e in t||(t[e]=[]),t[e].push(n)}return t}const Ye="list_1HutQ",Qe="role_2ga14";function Ke(e,t){const n=e.artist?.name??"",a=t.artist?.name??"";return n===a?0:n<a?-1:1}function Xe(e){const{releaseCredits:t=[]}=e;if(0===t.length)return null;const n=qe(t);return r.createElement(u.$0,{id:"release-credits",title:r.createElement(a.Trans,{id:"Credits"})},r.createElement("ul",{className:Ye},Object.entries(n).map((([e,t])=>r.createElement("li",{key:e},r.createElement("span",{className:Qe},e)," – ",t.sort(Ke).map(((e,n)=>e.artist&&r.createElement(r.Fragment,{key:e.artist.name},r.createElement(xe,{artist:e.artist,nameVariation:e.nameVariation}),e.applicableTracks?r.createElement(r.Fragment,null," ","(",r.createElement(a.Trans,{id:"tracks: {0}",values:{0:e.applicableTracks}}),")"):null,n<t.length-1&&", "))))))))}function Ze(e){const{notesFormatted:t}=e;return t&&""!==t.html.trim()?r.createElement(u.$0,{id:"release-notes",title:r.createElement(a.Trans,{id:"Notes"})},r.createElement("div",{dangerouslySetInnerHTML:{__html:t.html}})):null}const Je="list_3ky-r",et="entity_1XpR8";function tt(e){const{labels:t=[]}=e,n=t.filter((e=>e.labelRole!==he.b7.Label)).filter((e=>e.labelRole!==he.b7.Series));return 0===n.length?null:r.createElement(u.$0,{id:"release-companies",title:r.createElement(a.Trans,{id:"Companies, etc."})},r.createElement("ul",{className:Je},n.map((function(e){const{label:t,labelRole:n,catalogNumber:a}=e,{name:l}=t,i="discogsId"in t&&t.discogsId,s=i&&`/label/${i}-${ye(l)}`,c=s?r.createElement(ee.r,{href:s},l):r.createElement("span",null,l);return r.createElement("li",{key:`${i||l}-${n??""}`},n&&r.createElement(r.Fragment,null,r.createElement("span",{className:et},r.createElement(at,{labelRole:n}))," – "),c,a&&` – ${a}`)}))))}const nt={[he.b7.Label]:{id:"Label"},[he.b7.Series]:{id:"Series"},[he.b7.RecordCompany]:{id:"Record Company"},[he.b7.LicensedTo]:{id:"Licensed To"},[he.b7.LicensedFrom]:{id:"Licensed From"},[he.b7.LicensedThrough]:{id:"Licensed Through"},[he.b7.MarketedBy]:{id:"Marketed By"},[he.b7.DistributedBy]:{id:"Distributed By"},[he.b7.ManufacturedBy]:{id:"Manufactured By"},[he.b7.ExportedBy]:{id:"Exported By"},[he.b7.PhonographicCopyright]:{id:"Phonographic Copyright ℗"},[he.b7.Copyright]:{id:"Copyright ©"},[he.b7.MadeBy]:{id:"Made By"},[he.b7.PressedBy]:{id:"Pressed By"},[he.b7.DuplicatedBy]:{id:"Duplicated By"},[he.b7.PrintedBy]:{id:"Printed By"},[he.b7.PublishedBy]:{id:"Published By"},[he.b7.RecordedAt]:{id:"Recorded At"},[he.b7.EngineeredAt]:{id:"Engineered At"},[he.b7.OverdubbedAt]:{id:"Overdubbed At"},[he.b7.ProducedAt]:{id:"Produced At"},[he.b7.MixedAt]:{id:"Mixed At"},[he.b7.RemixedAt]:{id:"Remixed At"},[he.b7.MasteredAt]:{id:"Mastered At"},[he.b7.LacquerCutAt]:{id:"Lacquer Cut at"},[he.b7.GlassMasteredAt]:{id:"Glass Mastered at"},[he.b7.DesignedAt]:{id:"Designed At"},[he.b7.FilmedAt]:{id:"Filmed At"},[he.b7.RemasteredAt]:{id:"Remastered At"},[he.b7.EditedAt]:{id:"Edited At"},[he.b7.ProducedFor]:{id:"Produced For"},[he.b7.ManufacturedFor]:{id:"Manufactured For"},[he.b7.RecordedBy]:{id:"Recorded By"},[he.b7.ExclusiveRetailer]:{id:"Exclusive Retailer"}};function at(e){const{labelRole:t}=e,{i18n:n}=(0,p.G)(),a=t in nt?n._(nt[t]):t;return r.createElement(r.Fragment,null,a)}function rt(e){const t=e%60,n=(e-t)/60%60,a=(e-t-60*n)/3600,r=[];return 0!==a&&r.push(a),r.push(0===a?n:lt(n)),r.push(lt(t)),r.join(":")}function lt(e){return e>=10?e.toString():`0${e}`}var it=n(36);const st="index_3D8To",ct="tracklist_3QGRS",ot="heading_24HyI",dt="trackPos_2RCje",mt="subtrack_1Itjg",ut="subtrackPos_Vcoq2",Et="dash_1EAjh",ft="artist_3zAQD",gt="subtrackIcon_3MdY9",pt="duration_2t4qr",ht="trackTitle_CTKp4",yt="credits_12-wp",vt="measure_17Kyu credits_12-wp",_t="spacer_3IYs2",bt="toggle_2rDeb",wt="buttons_OirUG",Ct="info_16Aml";function It(){return(It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Tt(e){const{credits:t,expanded:n}=e,a=qe(t),l=r.useRef(null),i=r.useRef(null);!function(e,t,n){r.useEffect((function(){function a(){if(!t.current||!n.current)return;if(!e)return void(t.current.style.height="0px");const{height:a}=n.current.getBoundingClientRect();t.current.style.height=`${a}px`}return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)}),[e])}(Boolean(n),l,i);const s=Object.entries(a).map((function([e,t]){const n=t.map((function(e){return e.artist||e.nameVariation?r.createElement(xe,{artist:e.artist,nameVariation:e.nameVariation,key:e.artist?.name??e.nameVariation}):null})).filter((e=>null!==e));return 0===n.length?r.createElement("div",{key:e}):r.createElement("div",{key:e},r.createElement("span",null,e)," – ",W(", ",n))}));return r.createElement(r.Fragment,null,r.createElement("div",{className:yt,ref:l},s),r.createElement("div",{className:vt,ref:i,"aria-hidden":"true"},s))}function Nt(e){const{primaryArtists:t,trackCredits:n,title:a,durationInSeconds:l,subTracks:i,showCredits:s,hasArtists:c}=e;return r.createElement(r.Fragment,null,r.createElement("tr",{className:st},r.createElement("td",{className:dt},e.position),r.createElement("td",{className:ft},t&&r.createElement($e,{artists:t}),(Boolean(t?.length)||c)&&r.createElement("span",{className:Et},"–")),r.createElement("td",{className:ht},a,n&&n.length>0&&r.createElement(Tt,{credits:n,expanded:s})),r.createElement("td",{className:pt},l?`(${rt(l)})`:null)),i?.map((e=>r.createElement(Rt,It({key:e.position},e,{showCredits:s,hasArtists:Boolean(t?.length)})))))}function Rt(e){const{title:t,durationInSeconds:n,position:a,primaryArtists:l,trackCredits:i,showCredits:s,hasArtists:c}=e;return r.createElement("tr",{className:mt},r.createElement("td",{className:ut},r.createElement(C.MA7,{className:gt}),a),r.createElement("td",{className:ft},(Boolean(l?.length)||c)&&r.createElement("span",{className:Et},"–")),r.createElement("td",{className:ht},t,i&&i.length>0&&r.createElement(Tt,{credits:i,expanded:s})),r.createElement("td",{className:pt},n&&rt(n)))}function kt(e){const{title:t,durationInSeconds:n,position:a}=e;return r.createElement("tr",{className:ot,key:t},r.createElement("td",{className:dt},a),r.createElement("td",{className:ft}),r.createElement("td",{className:ht},t),r.createElement("td",{className:pt},n&&rt(n)))}function xt(e){const{primaryArtists:t,trackCredits:n,title:a,durationInSeconds:l,position:i,showCredits:s}=e;return r.createElement("tr",{"data-track-position":i},r.createElement("td",{className:dt},i),r.createElement("td",{className:ft},t&&t.length>0&&r.createElement(r.Fragment,null,r.createElement($e,{artists:t}),r.createElement("span",{className:Et},"–"))),r.createElement("td",{className:ht},r.createElement("span",{className:ht},a),n&&n.length>0&&r.createElement(Tt,{credits:n,expanded:s})),l&&r.createElement("td",{className:pt},r.createElement("span",null,rt(l))))}const $t=(0,pe.E)((function(e){const{tracks:t,expanded:n,page:l,perPage:i,dispatch:s}=e,{i18n:c}=(0,p.G)();if(!t||0===t.length)return null;const o=t.reduce((function(e,t){return e||Boolean(t.trackCredits&&0!==t.trackCredits.length)}),!1),d=r.createElement(r.Fragment,null,r.createElement("h3",null,r.createElement(a.Trans,{id:"Tracklist"})),r.createElement("span",{className:_t}),o&&r.createElement("button",{className:bt,onClick:function(){s({type:"toggle"})}},n?r.createElement(a.Trans,{id:"Hide Credits"}):r.createElement(a.Trans,{id:"Show Credits"}))),m="all"===i?0:l*i,E="all"===i?t.length:Math.min(t.length,(l+1)*i),f="all"===i?0:Math.ceil(t.length/i),g=t.slice(m,E),h=t.length>40&&r.createElement("div",{className:wt},r.createElement("select",{onChange:function(e){const t="all"===e.target.value?"all":parseInt(e.target.value,10);s({type:"per-page",perPage:t})},value:i},r.createElement("option",{value:"25"},"25"),r.createElement("option",{value:"50"},"50"),r.createElement("option",{value:"all"},c._({id:"Show all {0} tracks",values:{0:t.length}}))),r.createElement("span",{className:Ct},"all"!==i&&r.createElement(a.Trans,{id:"Tracks {0} — {1} of {2}",values:{0:(m+1).toLocaleString(),1:E.toLocaleString(),2:t.length.toLocaleString()}})),r.createElement(it.z,{color:"link",onClick:function(){s({type:"prev"})},disabled:0===l},r.createElement(a.Trans,{id:"<0/>Prev",components:[r.createElement(C.s$$,null)]})),r.createElement(it.z,{color:"link",onClick:function(){s({type:"next"})},disabled:l>=f-1},r.createElement(a.Trans,{id:"Next<0/>",components:[r.createElement(C._Qn,null)]})));return r.createElement(u.$0,{id:"release-tracklist",header:d},r.createElement("table",{className:ct},r.createElement("tbody",null,g.map((function(e,t){const a=`${e.position??""}-${l}-${t}`;switch(e.trackType){case he.Vc.Index:return r.createElement(Nt,It({},e,{showCredits:n,key:a}));case he.Vc.Heading:return r.createElement(kt,It({},e,{key:a}));case he.Vc.Track:default:return r.createElement(xt,It({},e,{showCredits:n,key:a}))}})))),h)}),(function(e,t,n){switch(n.type){case"toggle":return{...t,expanded:!t.expanded};case"next":return"all"!==t.perPage?{...t,page:Math.min(Math.ceil((e.tracks?.length??0)/t.perPage),t.page+1)}:t;case"prev":return"all"!==t.perPage?{...t,page:Math.max(0,t.page-1)}:t;case"per-page":return{...t,perPage:n.perPage,page:0};default:return t}}),{expanded:!0,perPage:50,page:0}),St="simple_iPiaF",Dt={[he.AD.Barcode]:r.createElement(a.Trans,{id:"Barcode"}),[he.AD.LabelCode]:r.createElement(a.Trans,{id:"Label Code"}),[he.AD.MatrixRunout]:r.createElement(a.Trans,{id:"Matrix / Runout"}),[he.AD.MasteringSidCode]:r.createElement(a.Trans,{id:"Mastering SID Code"}),[he.AD.MouldSidCode]:r.createElement(a.Trans,{id:"Mould SID Code"}),[he.AD.PressingPlantId]:r.createElement(a.Trans,{id:"Pressing Plant ID"}),[he.AD.DistributionCode]:r.createElement(a.Trans,{id:"DISTRIBUTION CODE"}),[he.AD.PriceCode]:r.createElement(a.Trans,{id:"Price Code"}),[he.AD.SparsCode]:r.createElement(a.Trans,{id:"SPARS CODE"}),[he.AD.DepositoLegal]:r.createElement(a.Trans,{id:"Depósito Legal"}),[he.AD.Asin]:r.createElement(a.Trans,{id:"ASIN"}),[he.AD.Isrc]:r.createElement(a.Trans,{id:"ISRC"}),[he.AD.RightsSociety]:r.createElement(a.Trans,{id:"Rights Society"}),[he.AD.Other]:r.createElement(a.Trans,{id:"Other"})};function At(e){const{barcodes:t=[]}=e;return 0===t.length?null:r.createElement(u.$0,{id:"release-barcodes",title:r.createElement(a.Trans,{id:"Barcode and Other Identifiers"})},r.createElement("ul",{className:St},t.map((function(e){const{value:t,type:n,description:a}=e;return r.createElement("li",{key:t},n&&Dt[n],a&&` (${a})`,": ",t)}))))}function Ft(e){if(!e)return[];const t=[];for(const n of e)void 0!==n.node&&t.push(n.node);return t}const Pt="header_RScTw",Ot="versions_1t0s2",Mt="title_X36RG",Lt="label_26Bha",Bt="cat_3-5zn",jt="country_13wN7",Vt="year_3YQJj",Ut="quality_1-x4K",zt="needschanges_105di",Ht="newsubmission_1j00T",Gt="tooltip_3cCtX",Wt="none_11Wf1",qt="all_3Qvoe",Yt="head_3D6Qb",Qt="unknown_2QuRU";function Kt(e){const{discogsId:t,masterRelease:n,sort:l}=e;if(!n||0===n.versions.totalCount)return null;const{discogsId:i,versions:{totalCount:s,edges:c}}=n,o=Ft(c).filter((e=>e.discogsId!==t)).slice(0,5),d=c.length<s,m=r.createElement(r.Fragment,null,r.createElement("h3",{className:Yt},d?r.createElement(a.Trans,{id:"Other Versions ({0} of {total})",values:{0:o.length,total:s}}):r.createElement(a.Trans,{id:"Other Versions ({0})",values:{0:o.length}}),i&&r.createElement(ee.r,{href:n.siteUrl,className:qt},r.createElement(a.Trans,{id:"View All"}))));return r.createElement(u.$0,{id:"release-other-versions",header:m},r.createElement("div",null,r.createElement("table",{className:Ot},r.createElement("tbody",null,r.createElement("tr",{className:Pt},r.createElement("th",{className:Ut}),r.createElement("th",{className:Mt},r.createElement(Xt,{field:"title",sort:l},r.createElement(a.Trans,{id:"Title"}))," (",r.createElement(Xt,{field:"format",sort:l},r.createElement(a.Trans,{id:"Format"})),")"),r.createElement("th",{className:Lt},r.createElement(Xt,{field:"label",sort:l},r.createElement(a.Trans,{id:"Label"}))),r.createElement("th",{className:Bt},r.createElement(Xt,{field:"catno",sort:l},r.createElement(a.Trans,{id:"Cat#"}))),r.createElement("th",{className:jt},r.createElement(Xt,{field:"country",sort:l},r.createElement(a.Trans,{id:"Country"}))),r.createElement("th",{className:Vt},r.createElement(Xt,{field:"year",sort:l},r.createElement(a.Trans,{id:"Year"}))),r.createElement("th",null)),o.map((e=>e&&r.createElement(Zt,{version:e,key:e.discogsId})))))))}function Xt(e){const{children:t}=e;return r.createElement(r.Fragment,null,t)}function Zt(e){const{version:t}=e,{title:n,formats:l,labels:i,country:s,released:c,dataQuality:o,siteUrl:d}=t;return r.createElement("tr",null,r.createElement(rn,{dataQuality:o}),r.createElement("td",null,r.createElement(ee.r,{href:d},n)," ",r.createElement(Jt,{formats:l})),r.createElement("td",null,r.createElement(en,{labels:i})),r.createElement("td",null,r.createElement(tn,{labels:i})),r.createElement("td",null,s),r.createElement("td",null,c?z(c):r.createElement("span",{className:Qt},r.createElement(a.Trans,{id:"Unknown"}))))}function Jt(e){const{formats:t}=e;return t&&0!==t.length?r.createElement(r.Fragment,null,"(",t.map((function(e){const{name:t,quantity:n,description:a}=e;return r.createElement(r.Fragment,{key:t},n&&"1"!==n&&r.createElement(r.Fragment,null,n," × "),t,a&&", ",a?.join(", "))})),")"):null}function en(e){const{labels:t}=e;return t?r.createElement(r.Fragment,null,W(", ",t.map((function(e){const{catalogNumber:t,label:{name:n}}=e;if(!t)return null;if("discogsId"in e.label&&e.label.discogsId){const{discogsId:a}=e.label,l=`${a}-${t}`;return r.createElement(ee.r,{key:l,href:`/label/${a}-${ye(n)}`},n)}return r.createElement(r.Fragment,{key:n},n)})).filter((e=>null!==e)))):null}function tn(e){const{labels:t}=e;if(!t)return null;const n=t.map((function(e){const{catalogNumber:t}=e;return t||null})).filter(((e,t,n)=>null!==e&&n.indexOf(e)===t));return r.createElement(r.Fragment,null,W(", ",n))}const nn={[he.x$.NewSubmission]:Ht,[he.x$.NeedsChanges]:zt,[he.x$.ReviewChanges]:null,[he.x$.Correct]:null},an={[he.x$.NewSubmission]:r.createElement(a.Trans,{id:"New Submission"}),[he.x$.NeedsChanges]:r.createElement(a.Trans,{id:"Needs Changes"}),[he.x$.ReviewChanges]:null,[he.x$.Correct]:null};function rn(e){const{dataQuality:t}=e,n=an[t];return n?r.createElement("td",{className:b()(Ut,nn[t])},r.createElement("div",{className:Gt},r.createElement("div",{className:Lt},n))):r.createElement("td",{className:b()(Ut,Wt)})}const ln="modal__c7Dy",sn="title_1qnkp",cn="overlay_3xrKU",on="close_37oWD",dn="buttons__bRku";function mn(e){const{open:t,children:n,title:a,onClose:l}=e;if(!t)return null;const i=l&&r.createElement("button",{className:on,title:"Close",onClick:l},r.createElement(C.x8P,null));return r.createElement("div",{className:cn,"aria-modal":"true"},r.createElement("div",{className:ln},(a||i)&&r.createElement("h3",{className:sn},a,i),n))}function un(e){const{cancelText:t=r.createElement(a.Trans,{id:"Cancel"}),confirmText:n=r.createElement(a.Trans,{id:"OK"}),onConfirm:l,onCancel:i,children:s,danger:c,...o}=e;return r.createElement(mn,o,s,r.createElement("div",{className:dn},r.createElement(it.z,{color:c?"red":"green",onClick:l},n),r.createElement(it.z,{onClick:i},t)))}const En="textarea_2-zKD";function fn(){return(fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function gn(e){return r.createElement("textarea",fn({},e,{className:b()(En,e.className)}))}const pn="input_3Pf8t";function hn(){return(hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function yn(e){return r.createElement("input",hn({},e,{className:b()(pn,e.className)}))}const vn="label_nXT0e",_n="optional_3uvwj";function bn(){return(bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function wn(e){const{children:t,className:n,optional:l=!1,...i}=e;return r.createElement("label",bn({},i,{className:b()(vn,n)}),t,l&&r.createElement("span",{className:_n},r.createElement(a.Trans,{id:"Optional"})))}var Cn=n(5540);const In="simple_2USPO",Tn="more_2U6G9",Nn="add_1U18E",Rn="title_3X-66",kn="form_k1ggd";function xn(e){const{discogsId:t,user:n}=e,l=Ft(e.lists.edges),{loggedIn:i}=(0,T.f0)(),s=function(e=!1){const[t,n]=r.useState(e);return{isOpen:t,open:()=>n(!0),cancel:()=>n(!1)}}(),[c,o]=r.useState(!0),[d,E]=r.useState(null),[f,g]=r.useState(""),[p,h]=r.useState(""),[y,v]=r.useState(""),_=c?null!==d:p.length>0,b=Boolean(n&&0===n.lists.edges.length),w=function(e){const{discogsId:t,title:n,description:a,comment:r}=e,[l,i]=(0,he.Ov)(),s=(0,Cn.UQ)({id:"Could not add release to list"});return{...i,perform:async function(){await l({variables:{input:{itemDiscogsId:t,itemType:he.qG.Release,title:n,description:a,comment:r}},update(e,n){e.modify({id:e.identify({__typename:"Release",discogsId:t}),fields:{lists(t){if(!t||!n.data?.createList?.curatedList)return t;const a=e.writeFragment({data:n.data.createList.curatedList,fragment:he.wS});if(!a)return t;const r={node:a};return{...t,totalCount:t.totalCount+1,edges:[r,...t.edges]}}}})}}).catch(s)}}}({discogsId:t,title:p,description:y,comment:f}),C=function(e){const{discogsId:t,comment:n,listId:a}=e,[r,l]=(0,he.Xj)(),i=(0,Cn.UQ)({id:"Could not add release to list"});return{...l,perform:async function(){null!==a&&await r({variables:{input:{itemDiscogsId:t,listDiscogsId:a,itemType:he.qG.Release,comment:n}},update(e,n){e.modify({id:e.identify({__typename:"Release",discogsId:t}),fields:{lists(t){if(!t||!n.data?.addToList?.curatedList)return t;const a=e.writeFragment({data:n.data.addToList.curatedList,fragment:he.wS});if(!a)return t;const r={node:a};return{...t,totalCount:t.totalCount+1,edges:[r,...t.edges]}}}})}}).catch(i)}}}({discogsId:t,comment:f,listId:d}),I=C.loading||w.loading,N=l.map((function(e){const{name:t,discogsId:n,url:l,curator:i}=e;return r.createElement("li",{key:n},r.createElement(a.Trans,{id:"<0>{name}</0> by <1>{0}</1>",values:{0:i.username,name:t},components:[r.createElement(ee.r,{href:l}),r.createElement(ee.r,{href:`/user/${i.username}`})]}))}));function R(){i?s.open():(0,T.x4)()}const k=r.createElement(r.Fragment,null,r.createElement("h3",{className:Rn},r.createElement(a.Trans,{id:"Lists"})),r.createElement(it.z,{color:"link",onClick:R,className:Nn},r.createElement(a.Trans,{id:"Add to List"})));return r.createElement(r.Fragment,null,r.createElement(u.$0,{id:"release-lists",collapsible:!0,header:k},r.createElement("ul",{className:In},N),0===l.length&&r.createElement(it.z,{color:"link",onClick:R},r.createElement(a.Trans,{id:"Add to List"})),l.length>0&&r.createElement(ee.r,{href:"/lists",className:Tn},r.createElement(a.Trans,{id:"View More Lists"})," →")),r.createElement(mn,{open:s.isOpen,title:r.createElement(a.Trans,{id:"Add to List"}),onClose:s.cancel},r.createElement("form",{onSubmit:async function(e){e.preventDefault(),!c||b?await w.perform():await C.perform(),s.cancel()},className:kn},r.createElement("div",null,r.createElement("input",{type:"radio",id:"existing",name:"new-or-existing",onChange:()=>o(!0),checked:!b&&c,disabled:b}),r.createElement("label",{htmlFor:"existing"},r.createElement(a.Trans,{id:"Existing List"})),r.createElement("input",{type:"radio",id:"new",name:"new-or-existing",onChange:()=>o(!1),checked:b||!c}),r.createElement("label",{htmlFor:"new"},r.createElement(a.Trans,{id:"New List"}))),c&&n?.lists&&r.createElement("div",null,r.createElement(wn,{htmlFor:"list"},r.createElement(a.Trans,{id:"List"})),r.createElement("select",{id:"list",onChange:function(e){const t=parseInt(e.target.value,10);E(-1!==t?t:null)}},r.createElement("option",{value:"-1"}),n.lists.edges.map((e=>e.node?r.createElement("option",{value:e.node.discogsId,key:e.node.discogsId},e.node.name):null)))),!c&&r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(wn,{htmlFor:"title"},r.createElement(a.Trans,{id:"Title"})),r.createElement("br",null),r.createElement(yn,{id:"title",type:"text",value:p,onChange:function(e){h(e.target.value)}})),r.createElement("div",null,r.createElement(wn,{htmlFor:"description",optional:!0},r.createElement(a.Trans,{id:"Description"})),r.createElement(gn,{id:"description",onChange:function(e){v(e.target.value)},value:y}))),r.createElement("div",null,r.createElement(wn,{htmlFor:"comment",optional:!0},r.createElement(a.Trans,{id:"Comments on this item"})),r.createElement(gn,{id:"comment",onChange:function(e){g(e.target.value)},value:f})),r.createElement(it.z,{type:"submit",color:"green",disabled:I||!_},I&&r.createElement(r.Fragment,null,r.createElement(m.$,null)," ",r.createElement(a.Trans,{id:"Saving..."})),!I&&r.createElement(a.Trans,{id:"Save"})),r.createElement(it.z,{disabled:I,onClick:s.cancel},r.createElement(a.Trans,{id:"Cancel"})))))}var $n=n(6104);const Sn={[he.x$.NewSubmission]:r.createElement(a.Trans,{id:"New Submission"}),[he.x$.NeedsChanges]:r.createElement(a.Trans,{id:"Needs Changes"}),[he.x$.ReviewChanges]:r.createElement(a.Trans,{id:"Review Changes"}),[he.x$.Correct]:r.createElement(a.Trans,{id:"Data Correct"})};function Dn(e){const{dataQuality:t,visibility:n}=e;return n===he.Li.Unlisted?r.createElement(a.Trans,{id:"Draft"}):Sn[t]}const An="id_3y8W3",Fn="vinyl_3tjPy",Pn="spacer_qpIE3",On="tooltip_1ie1O";function Mn(e){const{discogsId:t,masterRelease:n,dataQuality:l,visibility:i}=e,s=r.useRef(null);(0,$n.Vr)("ge",r.createElement(a.Trans,{id:"Go To Edit"}),`/release/${t}/history#latest`);const c=r.createElement(r.Fragment,null,r.createElement("h3",null,r.createElement(a.Trans,{id:"Release"})),r.createElement("span",{className:Pn}),r.createElement("button",{type:"button",className:An,onClick:function(){if(!s.current)return;(0,V.j)({category:"release",event:"selectedDiscogsCode"});const e=document.createRange();e.selectNodeContents(s.current);const t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(e))},"aria-labelledby":"discogsid-tooltip"},r.createElement(Ln,null)," ",r.createElement("span",{ref:s},"[r",t,"]"),r.createElement("div",{className:On,id:"discogsid-tooltip"},r.createElement(a.Trans,{id:"Select Release Code"}))));return r.createElement(u.$0,{id:"release-actions",header:c},r.createElement(ee.r,{href:`/release/${t}/history#latest`},r.createElement(a.Trans,{id:"Edit Release"})),r.createElement("br",null),n&&r.createElement(r.Fragment,null,r.createElement(ee.r,{href:n.siteUrl},r.createElement(a.Trans,{id:"All Versions of this Release"})),r.createElement("br",null)),r.createElement(Dn,{dataQuality:l,visibility:i}))}function Ln(){return r.createElement("svg",{viewBox:"0 0 100 100",className:Fn},r.createElement("circle",{cx:"50",cy:"50",r:"33",fill:"none",stroke:"black",strokeWidth:"33"}),r.createElement("circle",{cx:"50",cy:"50",r:"4"}))}function Bn(e){const{value:{amount:t,currency:n}}=e;return r.createElement(a.NumberFormat,{value:t,format:{style:"currency",currency:n}})}const jn="items_3gMeU",Vn="--";function Un(e){const{discogsId:t,data:n,loading:l}=e,{blockedFromSale:i=!1,ratings:{averageRating:s=Vn,totalCount:c=Vn}={},inCollectionCount:o=Vn,inWantlistCount:d=Vn,statistics:{lastSaleDate:m=null,min:E=null,max:f=null,median:g=null}={}}=n?.release??{};return r.createElement(u.$0,{id:"release-stats",title:r.createElement(a.Trans,{id:"Statistics"})},r.createElement("div",{className:jn},r.createElement("ul",null,r.createElement("li",null,r.createElement("h4",null,r.createElement(a.Trans,{id:"Have"}),":"),r.createElement(ee.r,{href:`/release/stats/${t}`},o)),r.createElement("li",null,r.createElement("h4",null,r.createElement(a.Trans,{id:"Want"}),":"),r.createElement(ee.r,{href:`/release/stats/${t}`},d)),r.createElement("li",null,r.createElement("h4",null,r.createElement(a.Trans,{id:"Avg Rating"}),":"),r.createElement("span",null,l&&Vn,!l&&0!==c&&s,!l&&0===c&&Vn," / 5")),r.createElement("li",null,r.createElement("h4",null,r.createElement(a.Trans,{id:"Ratings"}),":"),r.createElement(ee.r,{href:`/release/stats/${t}`},c))),r.createElement("ul",null,r.createElement("li",null,r.createElement("h4",null,r.createElement(a.Trans,{id:"Last Sold"}),":"),l&&r.createElement("span",null,Vn),(i||!m)&&!l&&r.createElement("span",null,r.createElement(a.Trans,{id:"Never"})),!i&&m&&!l&&r.createElement(ee.r,{href:`/sell/history/${t}`},r.createElement(Z,{value:new Date(m)}))),r.createElement("li",null,r.createElement("h4",null,r.createElement(a.Trans,{id:"Lowest"}),":"),r.createElement("span",null,!i&&E?r.createElement(Bn,{value:E.converted}):Vn)),r.createElement("li",null,r.createElement("h4",null,r.createElement(a.Trans,{id:"Median"}),":"),r.createElement("span",null,!i&&g?r.createElement(Bn,{value:g.converted}):Vn)),r.createElement("li",null,r.createElement("h4",null,r.createElement(a.Trans,{id:"Highest"}),":"),r.createElement("span",null,!i&&f?r.createElement(Bn,{value:f.converted}):Vn)))))}const zn="skittle_3qk48",Hn="header_3eShg",Gn="forsale_QoVFl",Wn="price_2Wkos",qn="buttons_1G_mP",Yn="button_1YfdK",Qn="search_2HzyR",Kn="placeholder_2uQ4d",Xn={[te.CD]:r.createElement(a.Trans,{id:"Sell CD"}),[te.CDr]:r.createElement(a.Trans,{id:"Sell CDr"}),[te.DVD]:r.createElement(a.Trans,{id:"Sell DVD"}),[te.Cassette]:r.createElement(a.Trans,{id:"Sell Cassette"}),[te.File]:r.createElement(a.Trans,{id:"Sell File"}),[te.Vinyl]:r.createElement(a.Trans,{id:"Sell Vinyl"}),[te.BoxSet]:r.createElement(a.Trans,{id:"Sell Box Set"}),[te.BluRay]:r.createElement(a.Trans,{id:"Sell Blu-ray"}),[te.Unknown]:r.createElement(a.Trans,{id:"Sell"})},Zn={[te.CD]:r.createElement(a.Trans,{id:"Buy CD"}),[te.CDr]:r.createElement(a.Trans,{id:"Buy CDr"}),[te.DVD]:r.createElement(a.Trans,{id:"Buy DVD"}),[te.Cassette]:r.createElement(a.Trans,{id:"Buy Cassette"}),[te.File]:r.createElement(a.Trans,{id:"Buy File"}),[te.Vinyl]:r.createElement(a.Trans,{id:"Buy Vinyl"}),[te.BoxSet]:r.createElement(a.Trans,{id:"Buy Box Set"}),[te.BluRay]:r.createElement(a.Trans,{id:"Buy Blu-ray"}),[te.Unknown]:r.createElement(a.Trans,{id:"Buy"})};function Jn(e){const{i18n:t}=(0,p.G)(),{error:n,loading:l,data:i,inventory:s=0}=e;if(n)return r.createElement(u.$0,{title:r.createElement(a.Trans,{id:"Marketplace"})},r.createElement(a.Trans,{id:"Could not fetch marketplace listings"}));if(l||!i?.release)return r.createElement(u.$0,{title:r.createElement(a.Trans,{id:"Marketplace"})},r.createElement("div",{className:Kn},r.createElement(m.$,null)));const{marketplaceListings:c,title:o,discogsId:d,formats:E,blockedFromSale:f,lowestPrice:g}=i.release,{totalCount:h=0}=c,y=ne(E?.[0]?.name);if(f)return r.createElement(u.$0,{title:r.createElement(a.Trans,{id:"Marketplace"})},r.createElement("p",null,r.createElement(a.Trans,{id:"This release has been blocked from sale in the marketplace. It is not permitted to sell this item on Discogs."})));if(1===E?.length&&"File"===E[0].name)return r.createElement(u.$0,{title:r.createElement(a.Trans,{id:"Marketplace"})},r.createElement("p",null,r.createElement(a.Trans,{id:"Digital content is not available for sale or trade on Discogs."})));const v=r.createElement("div",{className:Hn},r.createElement("h3",null,r.createElement(a.Trans,{id:"Marketplace"})),s>0&&r.createElement(ee.r,{"aria-label":t._({id:"{inventory} in Inventory",values:{inventory:s}}),title:t._({id:"{inventory} in Inventory",values:{inventory:s}}),href:"/sell/release/6312?seller=test",className:zn},s),h>0&&g?.converted&&r.createElement("span",{className:Gn},r.createElement(a.Trans,{id:"<0>{totalCount} For Sale</0> from <1><2/></1>",values:{totalCount:h},components:[r.createElement(ee.r,{href:`/sell/release/${d}`}),r.createElement("span",{className:Wn}),r.createElement(Bn,{value:g.converted})]})),h>0&&!g?.converted&&r.createElement("span",{className:Gn},r.createElement(a.Trans,{id:"<0>{totalCount} For Sale</0>",values:{totalCount:h},components:[r.createElement(ee.r,{href:`/sell/release/${d}`})]})));return r.createElement(u.$0,{header:v},c.totalCount<=0&&r.createElement(ee.r,{href:`/sell/release/${d}?ev=rb`,className:Qn},r.createElement(a.Trans,{id:"Search for <0>{title}</0>",values:{title:o},components:[r.createElement("strong",null)]})),r.createElement("div",{className:qn},c.totalCount>0&&r.createElement(it.A,{href:`/sell/release/${d}`,className:Yn,color:"blue"},Zn[y]),r.createElement(it.A,{href:`/sell/post/${d}`,className:Yn,color:"grey"},Xn[y])))}var ea=n(2563);const ta="box_384HK",na="added_2xbrC",aa="remove_1a0fv",ra="field_wknMb",la="edit_3z9EO",ia="value_33OPW",sa="condition_1XAyi",ca="dropdown_2oj7i",oa="notes_2wujE";function da(e){const{className:t,title:n,added:l,onRemove:i,children:s,removing:c}=e,{i18n:o}=(0,p.G)();return r.createElement("div",{className:b()(ta,t)},r.createElement("header",null,r.createElement("h2",null,n)," ",r.createElement("span",{className:na},o._(function(e){const t=Math.floor((Date.now()-e.getTime())/1e3),n=Math.floor(t/31536e3),a=Math.floor(t/2592e3),r=Math.floor(t/86400),l=Math.floor(t/3600),i=Math.floor(t/60);if(n>1)return{id:"Added {years,number} years ago",values:{years:n}};if(a>1)return{id:"Added {months,number} months ago",values:{months:a}};if(r>1)return{id:"Added {days,number} days ago",values:{days:r}};if(l>1)return{id:"Added {hours,number} hours ago",values:{hours:l}};if(i>1)return{id:"Added {minutes,number} minutes ago",values:{minutes:i}};return{id:"Added just now"}}(l)))," ",r.createElement(it.z,{className:aa,color:"link",small:!0,onClick:i,disabled:c},c&&r.createElement(m.$,null)," ",r.createElement(a.Trans,{id:"Remove"}))),s)}function ma(e){const{name:t,value:n,options:l,onChange:i,type:s}=e,[c,o]=r.useState(!1),[d,m]=r.useState(n),u=r.useRef(null),E=r.useRef();function f(){o(!1),i?.(d)}function g(e){m(e.target.value)}r.useEffect((function(){c&&u.current&&u.current.focus()}),[c]),r.useEffect((function(){return s===he.IL.Dropdown&&(clearTimeout(E.current),E.current=setTimeout((()=>o(!1)),500)),()=>clearTimeout(E.current)}),[d]);const p=r.createElement("button",{type:"button",className:b()(la,d&&ia),onClick:function(){o(!0)}},d||r.createElement(a.Trans,{id:"Edit"}),r.createElement(C.zaA,null)),h=s===he.IL.Dropdown&&l?r.createElement("div",{className:sa},r.createElement("select",{className:ca,size:l.length+1,onChange:g,onKeyDown:function(e){e.key===ea.IO&&f()},onClick:f,value:d,onBlur:f,ref:u},r.createElement("option",{value:""}),l.map((e=>r.createElement("option",{value:e,key:e},e))))):r.createElement("div",{className:oa},r.createElement("textarea",{ref:u,rows:4,onChange:g,value:d}),r.createElement(it.z,{type:"button",onClick:f,small:!0,color:"green"},r.createElement(a.Trans,{id:"Save"})),r.createElement(it.z,{type:"button",onClick:function(){m(n),f()},small:!0},r.createElement(a.Trans,{id:"Cancel"})));return r.createElement("div",{className:ra},r.createElement("label",null,t),c?h:p)}const ua="collection_3SHpt";function Ea(e){const{discogsId:t,item:n,user:l}=e,{discogsId:i,addedAt:s}=n,c=function(e){const{discogsId:t,itemId:n}=e,{user:a}=(0,T.f0)(),r=(0,Cn.UQ)({id:"Coulld not remove the release from your collection"}),[l,i]=(0,he.bX)();return{...i,perform:async function(){a&&await l({variables:{input:{discogsId:n}},optimisticResponse:{removeFromCollection:{__typename:"RemoveCollectionItemPayload",success:!0}},update(e,a){e.modify({id:e.identify({__typename:"Release",discogsId:t}),fields:{collectionItems(t){if(!t||!a.data)return t;const r=e.identify({__typename:"CollectionItem",discogsId:n});return{...t,totalCount:t.totalCount-1,edges:t.edges.filter((e=>e.node?.__ref!==r))}}}})}}).catch(r)}}}({discogsId:t,itemId:i}),o=function(e){const{itemId:t}=e,[n,a]=(0,he.XV)(),{user:r}=(0,T.f0)(),l=(0,Cn.UQ)({id:"Could not edit the collection note"});return{...a,perform:async function(e,a,i){r&&await n({variables:{input:{discogsItemId:t,discogsNoteTypeId:e,noteText:i}},update(n,r){a?n.modify({id:n.identify({__typename:"CollectionNote",discogsId:a}),fields:{text:e=>r.data?r.data.editCollectionItemNote.collectionNote.text??"":e}}):n.modify({id:n.identify({__typename:"CollectionItem",discogsId:t}),fields:{notes(t){const a=n.writeFragment({fragment:he.c9,data:{__typename:"CollectionNote",discogsId:Math.round(1e3*Math.random()),text:i,noteType:{__typename:"CollectionNoteType",discogsId:e}}});return a?[...t,a]:t}}})}}).catch(l)}}}({itemId:i}),d=function(e){const{itemId:t}=e,[n,a]=(0,he.vm)(),{user:r}=(0,T.f0)(),l=(0,Cn.UQ)({id:"Could not remove collection note"});return{...a,perform:async function(e){r&&await n({variables:{input:{discogsId:e}},optimisticResponse:{removeCollectionItemNote:{__typename:"RemoveCollectionNotePayload",success:!0}},update(e,n){e.modify({id:e.identify({__typename:"CollectionItem",discogsId:t}),fields:{notes(a){if(!n.data)return a;const r=e.identify({__typename:"CollectionNote",discogsId:t});return a.filter((e=>e.__ref!==r))}}})}}).catch(l)}}}({itemId:i});const m=l.collectionNoteTypes.edges.map((function(e){if(!e.node)return null;const{name:t,options:a,fieldType:l,discogsId:i}=e.node,s=n.notes.find((e=>e.noteType.discogsId===i));return r.createElement(ma,{key:i,name:t,options:a,value:s?.text??"",onChange:e=>function(e,t){const a=n.notes.find((t=>t.noteType.discogsId===e));a?.text!==t&&(""!==t?o.perform(e,a?.discogsId,t):a&&d.perform(a.discogsId))}(i,e),type:l})}));return r.createElement(da,{title:r.createElement(a.Trans,{id:"In Collection"}),added:new Date(s),className:ua,onRemove:function(){c.perform()},removing:c.loading},m)}const fa="wantlist_3AV5h";function ga(e){const{discogsId:t,item:n,remove:l,removing:i}=e,{addedAt:s,notes:c}=n,o=function(e){const{discogsId:t}=e,[n,a]=(0,he.uC)(),{user:r}=(0,T.f0)(),l=(0,Cn.UQ)({id:"Could not edit wantlist note"});return{...a,perform:async function(e){r&&await n({variables:{input:{releaseDiscogsId:t,notes:e}},update(e,n){e.modify({id:e.identify({__typename:"Release",discogsId:t}),fields:{inWantlist:e=>n.data?{...e,...n.data.editWantlistItemNotes.wantlistItem}:e}})}}).catch(l)}}}({discogsId:t,notes:c??""});return r.createElement(da,{title:r.createElement(a.Trans,{id:"In Wantlist"}),added:new Date(s),className:fa,onRemove:l,removing:i},r.createElement(ma,{name:r.createElement(a.Trans,{id:"Notes"}),value:c??"",onChange:function(e){o.perform(e)},type:he.IL.Textarea}))}const pa="wrapper_cGBtH",ha="buttons_2jlYL",ya="button_3lhp0";function va(e){const{loggedIn:t}=(0,T.f0)(),{discogsId:n,info:l,user:i,loading:s}=e,c=function(e){const{discogsId:t}=e,{user:n}=(0,T.f0)(),a=(0,Cn.UQ)({id:"Could not add release to collection"}),[r,l]=(0,he.yx)();return{perform:async function(){n&&await r({variables:{input:{discogsReleaseId:t,username:n.username}},optimisticResponse:{addToCollection:{__typename:"AddCollectionItemPayload",collectionItemId:Math.round(1e5*Math.random())}},update(e,n){e.modify({id:e.identify({__typename:"Release",discogsId:t}),fields:{collectionItems(t){if(!t)return t;if(!n.data)return t;const a=e.writeFragment({fragment:he.EI,fragmentName:"ReleaseCollectionItem",data:{__typename:"CollectionItem",discogsId:n.data.addToCollection.collectionItemId,addedAt:(new Date).toISOString(),notes:[],folder:{name:"Uncategorized"}}}),r={cursor:btoa(`${n.data.addToCollection.collectionItemId}`),node:a};return{...t,totalCount:t.totalCount+1,edges:[...t.edges,r]}}}})}}).catch(a)},...l}}({discogsId:n}),o=function(e){const{discogsId:t}=e,{user:n}=(0,T.f0)(),[a,r]=(0,he.xs)(),l=(0,Cn.UQ)({id:"Could not add release to wantlist"});return{...r,perform:async function(){n&&await a({variables:{input:{discogsReleaseId:t,username:n.username}},optimisticResponse:{addReleaseToWantlist:{__typename:"ReleaseToWantlistPayload",wantlistItemId:Math.round(1e5*Math.random())}},update(e,n){e.modify({id:e.identify({__typename:"Release",discogsId:t}),fields:{inWantlist(){if(n.data)return{discogsId:n.data.addReleaseToWantlist.wantlistItemId,addedAt:(new Date).toISOString(),notes:""}}}})}}).catch(l)}}}({discogsId:n}),d=function(e){const{discogsId:t}=e,n=(0,Cn.UQ)({id:"Could not remove release from wantlist"}),[a,r]=(0,he.e)(),{user:l}=(0,T.f0)();return{...r,perform:async function(){l&&await a({variables:{input:{releaseDiscogsId:t}},optimisticResponse:{removeReleaseFromWantlist:{__typename:"RemoveItemPayload",success:!0}},update(e,n){e.modify({id:e.identify({__typename:"Release",discogsId:t}),fields:{inWantlist:(e,t)=>n.data?t.DELETE:e}})}}).catch(n)}}}({discogsId:n});function u(){t?c.perform():(0,T.x4)()}function E(){t?o.perform():(0,T.x4)()}function f(){t?d.perform():(0,T.x4)()}return(0,$n.bx)("ac","action",r.createElement(a.Trans,{id:"Add To Collection"}),u),(0,$n.bx)("aw","action",r.createElement(a.Trans,{id:"Add To Wantlist"}),E),r.createElement("div",{className:pa},r.createElement("div",{className:ha},r.createElement(it.z,{className:ya,small:!0,onClick:u,disabled:s||c.loading},c.loading&&r.createElement(m.$,null),!c.loading&&r.createElement(r.Fragment,null,r.createElement(C.FEg,null)," ",r.createElement(a.Trans,{id:"Add to Collection"}))),l?.inWantlist?r.createElement(it.z,{className:ya,small:!0,onClick:f,disabled:s||d.loading},d.loading&&r.createElement(m.$,null),!d.loading&&r.createElement(r.Fragment,null,r.createElement(C.WF_,null)," ",r.createElement(a.Trans,{id:"Remove from Wantlist"}))):r.createElement(it.z,{className:ya,small:!0,onClick:E,disabled:s||o.loading},o.loading&&r.createElement(m.$,null),!o.loading&&r.createElement(r.Fragment,null,r.createElement(C.bAj,null)," ",r.createElement(a.Trans,{id:"Add to Wantlist"})))),i&&l?.collectionItems?.edges.map((e=>e.node?r.createElement(Ea,{discogsId:n,item:e.node,key:e.node.discogsId,user:i}):null)),l?.inWantlist&&r.createElement(ga,{discogsId:n,item:l.inWantlist,remove:f,removing:d.loading}))}function _a(e){const{videos:t,masterRelease:n}=e;return n?.videos&&n.videos.length>0?n.videos:t}const ba="videos_1xVCN",wa="video_SuWuh",Ca="player_3pThv",Ia="thumbnail_f0Yrr",Ta="active_1w6wZ",Na="info_Xvbmo",Ra="title_26yzZ",ka="duration_2C2S0",xa="play_3doe7 media_39TAQ",$a="pause_33-Na media_39TAQ",Sa="edit_1ddlh",Da="head_WZcFZ",Aa="placeholder_1VFFD",Fa="btn_287HC",Pa="youtube_-uhKd";function Oa(e){return r.createElement("div",{id:e.id,key:e.id})}const Ma=r.memo(Oa);function La(e){const{video:t,dispatch:n,index:a,active:l}=e,{title:i,duration:s,youtubeId:c}=t,o=b()(wa,l&&Ta);return r.createElement("li",null,r.createElement("button",{type:"button",className:o,onClick:()=>n({type:"select",index:a})},r.createElement(Ba,{youtubeId:c,title:i}),r.createElement(C.shV,{className:xa}),r.createElement(C.dzL,{className:$a}),r.createElement("div",{className:Na},r.createElement("div",{className:Ra},i)),r.createElement(ja,{value:s})))}function Ba(e){const{youtubeId:t,title:n}=e,{i18n:a}=(0,p.G)(),l=`https://i.ytimg.com/vi/${t}/default.jpg`,i={id:"Thumbnail for {title}",values:{title:n}};return r.createElement("img",{src:l,className:Ia,alt:a._(i),width:60,height:45,loading:"lazy"})}function ja(e){const{value:t}=e,n=rt(t);return r.createElement("span",{className:ka},n)}function Va(e){const{video:t,dispatch:n}=e,{i18n:a}=(0,p.G)();return r.createElement("button",{className:Aa,type:"button",onClick:function(){n({type:"select",index:0})},title:a._({id:"Play Video"})},r.createElement("img",{src:`https://i.ytimg.com/vi/${t.youtubeId}/hqdefault.jpg`,height:240,alt:t.title}),r.createElement("svg",{viewBox:"0 0 68 48",className:Pa},r.createElement("path",{className:Fa,d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z"}),r.createElement("path",{d:"M 45,24 27,14 27,34",fill:"#fff"})))}const Ua="youtube-player";function za(e){return e.youtubeId}const Ha=(0,pe.E)((function(e){const{index:t,dispatch:n,error:l,id:i}=e,s=_a(e),c=s.length,o=r.createElement(a.Trans,{id:"Videos ({count})",values:{count:c}});if(l)return r.createElement(u.$0,{title:o,collapsible:!0},r.createElement(a.Trans,{id:"An error occurred when loading the videos."}));if(0===c)return null;const d=`/release/${e.discogsId}-/videos/update`,m=r.createElement(r.Fragment,null,r.createElement("h3",{className:Da},o),r.createElement(ee.r,{href:d,className:Sa},r.createElement(a.Trans,{id:"Edit"})));return r.createElement(u.$0,{id:"release-videos",header:m,collapsible:!0},r.createElement("div",{className:Ca},i?r.createElement(Ma,{id:i}):r.createElement(Va,{video:s[0],dispatch:n})),r.createElement("ul",{className:ba},s.map(((e,a)=>r.createElement(La,{video:e,key:e.discogsId,dispatch:n,index:a,active:t===a})))))}),(function(e,t,n){switch(n.type){case"init":return{...t,id:n.id};case"next":return{...t,index:Math.min(e.videos.length-1,(t.index??-1)+1)};case"previous":return{...t,index:Math.min(e.videos.length-1,(t.index??1)-1)};case"select":return(0,V.j)({category:"release",event:"videoplaying",index:n.index}),{...t,index:n.index,id:Ua};case"error":return{...t,error:n.error};case"ready":return{...t,player:n.player};case"pause":return{...t,index:null};default:return t}}),(function(e){return{id:null,index:null,player:null,error:null}}),(function(e,t,n){const a=_a(e);r.useEffect((function(){return 0===a.length||t.player||!t.id?()=>{}:(new Promise((function(e,t){if(window.YT)return void e(window.YT);window.onYouTubeIframeAPIReady=function(){e(window.YT)};const n=document.createElement("script");n.src="https://www.youtube.com/iframe_api",document.body.append(n)})).then((function(e){const r=new e.Player(Ua,{width:"100%",height:240,playerVars:{rel:0,modestbranding:1,autohide:1,showinfo:0},events:{onReady(){n({type:"ready",player:r}),r.loadPlaylist(a.map(za),t.index,0)},onStateChange(t){switch(t.data){case e.PlayerState.PLAYING:case e.PlayerState.BUFFERING:return void n({type:"select",index:t.target.playerInfo.playlistIndex});case e.PlayerState.PAUSED:n({type:"pause"})}},onError(e){(0,V.j)({category:"release",event:"video-error",error:`Video playback error ${e.data}`})}}})})).catch((e=>n({type:"error",error:e}))),function(){t.player&&t.player.destroy()})}),[a,t.id]),r.useEffect((function(){t.player&&(0!==t.index||0!==t.player.getPlaylistIndex()?t.player&&null!==t.index&&t.player.getPlaylistIndex()!==t.index&&t.player.playVideoAt(t.index):t.player.playVideo())}),[t.index])}));const Ga="star_1sqH5",Wa="icon_2LaLF",qa="fill_t6pK3",Ya="remove_ttFNn";function Qa(e){const{min:t,rating:n,dispatch:a,onChange:l}=e,{i18n:i}=(0,p.G)();return r.createElement("button",{onMouseEnter:()=>a({type:"hover",rating:t}),onClick:()=>l(t),className:Ga,type:"button",title:i._({id:"{min, plural, one {Rate this release 1 star} other {Rate this release # stars}}",values:{min:t}})},r.createElement(Xa,{min:t,rating:n??0}))}function Ka(e){const{value:t,...n}=e;return r.createElement("span",n,r.createElement(Xa,{min:1,rating:t??0}),r.createElement(Xa,{min:2,rating:t??0}),r.createElement(Xa,{min:3,rating:t??0}),r.createElement(Xa,{min:4,rating:t??0}),r.createElement(Xa,{min:5,rating:t??0}))}function Xa(e){const{min:t,rating:n}=e,a=n>=t,l=a?C.Uxw:C.gF7;return r.createElement(l,{className:b()(Wa,a&&qa),noTitle:!0})}const Za=(0,pe.E)((function(e){const{value:t,hovering:n,dispatch:a,onChange:l}=e,{i18n:i}=(0,p.G)();return r.createElement("div",null,r.createElement("span",{onMouseLeave:()=>a({type:"hover",rating:null})},r.createElement(Qa,{min:1,rating:n??t,dispatch:a,onChange:l}),r.createElement(Qa,{min:2,rating:n??t,dispatch:a,onChange:l}),r.createElement(Qa,{min:3,rating:n??t,dispatch:a,onChange:l}),r.createElement(Qa,{min:4,rating:n??t,dispatch:a,onChange:l}),r.createElement(Qa,{min:5,rating:n??t,dispatch:a,onChange:l})),r.createElement("button",{type:"button",onClick:()=>l(null),className:Ya,disabled:!t,"aria-label":i._({id:"Remove Rating"})},r.createElement(C.x8P,null)))}),(function(e,t,n){switch(n.type){case"hover":return{...t,hovering:n.rating};default:return t}}),{hovering:null});function Ja(e){return Math.round(100*e)/100}const er="ratings_1pAt8";function tr(e){const{discogsId:t,rating:n}=e,{user:a}=(0,T.f0)(),[l]=function(e){const{discogsId:t}=e,[n,a]=(0,he.Eo)();return[async function(e){await n({variables:{input:{discogsId:t,rating:e}},optimisticResponse:{rateRelease:{__typename:"RateReleasePayload",rating:{__typename:"Rating",id:Math.random().toString(),value:e}}},update(n,a){n.modify({id:n.identify({__typename:"Release",discogsId:t}),fields:{rating:()=>({__typename:"Rating",id:Math.random().toString(),value:e}),ratings(t){if(!t)return{totalCount:1,averageRating:e};const n=Ja((t.totalCount*t.averageRating+e)/(t.totalCount+1));return{...t,totalCount:t.totalCount+1,averageRating:n}}}})}})},a]}({discogsId:t}),[i]=function(e){const{discogsId:t,rating:n}=e,[a,r]=(0,he.xh)();return[async function(){n&&await a({variables:{input:{discogsId:t}},optimisticResponse:{removeReleaseRating:{__typename:"RemoveReleaseRatingPayload",success:!0}},update(e,a){e.modify({id:e.identify({__typename:"Release",discogsId:t}),fields:{rating:(e,t)=>t.DELETE,ratings(e){if(!e)return e;const t=Ja((e.totalCount*e.averageRating-(n.value??0))/(e.totalCount-1));return{...e,totalCount:e.totalCount-1,averageRating:t}}}})}})},r]}({discogsId:t,rating:n});return r.createElement("div",{className:er},r.createElement(Za,{value:n?.value??0,onChange:async function(e){await function(e){return new Promise((function(t){setTimeout(t,e)}))}(10),a?n||null===e?await i():await l(e):(0,T.x4)()}}))}const nr="facebook_33n-X link_2mEcJ",ar="twitter_1F5ys link_2mEcJ",rr="content_1VRnO",lr="wrapper_3ECKE";const ir=(0,pe.E)((function(e){const{dispatch:t,open:n,url:l,title:i}=e,s=`http://www.facebook.com/sharer.php?u=${encodeURIComponent(l)}`,c=`http://twitter.com/share?url=${encodeURIComponent(l)}&text=${encodeURIComponent(i)}&via=discogs`;return r.createElement("div",{className:lr},r.createElement(Te,null,r.createElement(it.z,{color:"link",onClick:()=>t({type:"toggle"})},r.createElement(C.KKV,null),r.createElement(a.Trans,{id:"Share"})),r.createElement(Ie,{title:r.createElement(a.Trans,{id:"Share"}),position:"bottomEnd",open:n,onClose:()=>t({type:"close"}),id:"release-share-tooltip"},r.createElement("div",{className:rr},r.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:nr},r.createElement(C.s1S,null),r.createElement(a.Trans,{id:"Facebook"})),r.createElement("br",null),r.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:ar},r.createElement(C.tLe,null),r.createElement(a.Trans,{id:"Twitter"}))))))}),(function(e,t,n){switch(n.type){case"toggle":return{...t,open:!t.open};case"close":return{...t,open:!1};default:return t}}),{open:!1});function sr(e){return r.createElement(l.Dx,null,cr(e)," - Discogs")}function cr(e){const{title:t,released:n,formats:a,primaryArtists:r,visibility:l}=e,i=l===he.Li.Unlisted?"Draft of ":"",s=U(r)?void 0:r?.map((function(e,t){const n=e.nameVariation||e.artist?.name||"",a=t<r.length-1?function(e){return e.joiningText&&","!==e.joiningText?` ${e.joiningText} `:", "}(e):"";return`${n.replace(/ \(\d+\)/,"")}${a}`})).join("").concat(" – "),c=[n&&z(n),a?.[0]?.text,a?.[0]?.name].filter((e=>Boolean(e)&&""!==e)).join(", ");return`${i}${s??""}${t}${c.length>0?` (${c})`:""}`}function or(e){const{i18n:t}=(0,p.G)(),{images:n,siteUrl:a,formats:i,title:s,released:c,visibility:o}=e,d=n.edges[0]?.node?.fullsize.sourceUrl,m=cr(e),u=[c&&z(c),i?.[0]?.name].filter((e=>Boolean(e))).join(" "),E=t._({id:'View credits, reviews, tracks and shop for the {info} release of "{title}" on Discogs.',values:{info:u,title:s}});return r.createElement(r.Fragment,null,r.createElement(l.h_,{property:"og:type",content:"music.album"}),r.createElement(l.h_,{property:"og:title",content:m}),r.createElement(l.h_,{property:"twitter:title",content:m}),r.createElement(l.h_,{name:"description",content:E}),r.createElement(l.h_,{property:"og:description",content:E}),r.createElement(l.h_,{property:"twitter:description",content:E}),r.createElement(l.h_,{property:"og:site_name",content:"Discogs"}),r.createElement(l.h_,{property:"twitter:site",content:"@discogs"}),d&&r.createElement(l.h_,{property:"og:image",content:d}),d&&r.createElement(l.h_,{property:"twitter:image:src",content:d}),r.createElement(l.h_,{property:"og:url",content:`https://www.discogs.com${a}`}),r.createElement(l.h_,{property:"fb:app_id",content:"117175028305858"}),r.createElement(l.h_,{property:"twitter:card",content:"summary_card_large"}),r.createElement(l.rU,{rel:"canonical",href:`https://www.discogs.com${a}`}),o!==he.Li.Public&&r.createElement(l.h_,{name:"robots",content:"noindex"}))}var dr=n(523),mr=n.n(dr);const ur="card_37NBc",Er="title_3Hca2",fr="artists_R6CXt",gr="image_Dej1Z";function pr(e){const{images:t,primaryArtists:n,title:a,formats:l,siteUrl:i,lazyImage:s}=e,c=l?.[0]?.name??"Vinyl",o=t?.edges[0]?.node?.thumbnail;return r.createElement("figure",{className:ur},r.createElement(ee.r,{href:i,className:gr},r.createElement(ce,{image:o,alt:a,format:c,lazy:s})),r.createElement("figcaption",null,r.createElement("div",{className:Er},r.createElement(ee.r,{href:i,title:a},a)),r.createElement("div",{className:fr},r.createElement($e,{artists:n??[]}))))}const hr="nav_fzDgx",yr="cards_3VSy1",vr="placeholder_1P6ut",_r="section_2oTBE",br="wrapper_MVvNX";function wr(){return(wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Cr(e,t){if(0===t)return 1;return e.scrollWidth/t}const Ir=(0,pe.E)((function(e){const{index:t,isOffensive:n,native:l,dispatch:i,recommendations:{totalCount:s,edges:c},offset:o}=e,d=r.useRef(null);if(r.useEffect((function(){if(!d.current||l)return;const e=d.current.getBoundingClientRect().left,n=d.current.getElementsByTagName("li")[t].getBoundingClientRect().left;d.current.scrollTo({left:d.current.scrollLeft+n-e,behavior:"smooth"})}),[t,l]),r.useEffect((function(){function e(){if(!d.current)return;const e=d.current.offsetWidth,t=Math.max(1,Math.floor(e/Cr(d.current,s)));isNaN(t)||i({type:"resize",offset:t})}return mr().polyfill(),e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),s<=0||n)return null;const m=new Array(Math.max(0,s-c.length)).fill(0).map((function(e,t){return r.createElement("li",{key:c.length+t},r.createElement("div",{className:vr}))}));return r.createElement(u.$0,{id:"release-recommendations",title:r.createElement(a.Trans,{id:"Recommendations"}),className:_r},r.createElement("div",{className:br},r.createElement("ul",{ref:d,className:yr,onScroll:function(e){if(0===s)return;const t=e.target,n=t.scrollLeft,a=Cr(t,s+1),r=Math.floor(n/a);i({type:"scroll",index:r})}},c.map((function(e,t){return r.createElement("li",{key:t},r.createElement(pr,wr({},e.node,{lazyImage:!0})))})),m),r.createElement("nav",{className:hr},r.createElement("button",{onClick:function(){i({type:"left"})},disabled:0===t},r.createElement(C.qXZ,null)),r.createElement("button",{onClick:function(){i({type:"right"})},disabled:t>s-o-1},r.createElement(C.afD,null)))))}),(function(e,t,n){switch(n.type){case"left":return{...t,index:Math.max(0,t.index-t.offset),native:!1};case"right":return{...t,index:Math.min(e.recommendations.totalCount-1,t.index+t.offset),native:!1};case"scroll":return{...t,index:n.index,native:!0};case"resize":return{...t,offset:n.offset};case"more":return{...t,recommendations:{totalCount:n.data.recommendations.totalCount,edges:[...t.recommendations.edges,...n.data.recommendations.edges]}};default:return t}}),(function(e){return{index:0,native:!0,offset:1,recommendations:e.recommendations}}),(function(e,t,n){const{discogsId:a,isOffensive:l,disableLoadingMore:i,recommendations:{totalCount:s}}=e,{recommendations:c}=t,[o,{data:d}]=(0,he.sS)(),[m,u]=r.useState(null);r.useEffect((function(){if(!i&&!l&&t.index>c.edges.length-t.offset-2&&s>0){const e=c.edges[c.edges.length-1]?.cursor;u(e)}}),[t.index,i,l]),r.useEffect((function(){m&&o({variables:{discogsId:a,after:m}})}),[m]),r.useEffect((function(){d?.release&&n({type:"more",data:d.release})}),[d])})),Tr="original_1aGIQ";function Nr(e){const{contributors:t}=e;return r.createElement(u.$0,{title:r.createElement(a.Trans,{id:"Contributors"})},W(", ",t.map((function(e){if(!e)return null;const{user:{username:t},isOriginalSubmitter:n}=e,a=`/user/${t}`,l=b()(n&&Tr);return r.createElement(ee.r,{href:a,className:l,key:t},t)})).filter((e=>null!==e))))}var Rr=n(6157);const kr="preview_3ukIW",xr="content_2nKpV";function $r(e){const{value:t}=e,[n]=(0,Rr.Z)(t,300,{leading:!0}),{data:l,previousData:i}=(0,he.V_)({ssr:!1,skip:""===t,variables:{markup:n}}),s=(l??i)?.markup.html??"";return""===t||""===s?null:r.createElement("div",{className:kr},r.createElement("strong",null,r.createElement(a.Trans,{id:"Preview"})),r.createElement("div",{className:xr,dangerouslySetInnerHTML:{__html:s}}))}const Sr="editor_3Khqj",Dr="input_3iI51",Ar="toolbar_Pu7q2",Fr="submit_2yYrR",Pr="error_3q46b",Or="count_1Q64h";function Mr(e){const{i18n:t}=(0,p.G)(),{discogsId:n,parent:l,onCancel:i,isEdit:s,initialValue:c="",reviewId:o}=e,[d,u]=r.useState(c),[E,f]=function(e){const{content:t,discogsReleaseId:n,parent:a}=e,[r,l]=(0,he.uo)();return[async function(){await r({variables:{input:{content:t,discogsReleaseId:n,discogsReviewId:a?.discogsId}},update(e,t){if(a){const n=e.identify({__typename:"Review",discogsId:a.discogsId});e.modify({id:n,fields:{replies(n){if(!t.data)return n;const a=e.writeFragment({data:t.data.reviewRelease.review,fragment:he.Ep});return a?n?[a,...n]:[a]:n}}})}else e.modify({id:e.identify({__typename:"Release",discogsId:n}),fields:{reviews(n){if(!t.data||!t.data.reviewRelease.review||!n)return n;const a=e.writeFragment({data:t.data.reviewRelease.review,fragment:he.Ep});if(!a)return n;const r={node:a,cursor:btoa(`ReleaseReviewPagination:${t.data.reviewRelease.review.discogsId}`)};return{totalCount:n.totalCount+1,edges:[r,...n.edges]}}}})}}).catch((()=>{}))},l]}({discogsReleaseId:n,content:d,parent:l}),[g,h]=function(e){const{reviewId:t,content:n}=e,[a,r]=(0,he.ZE)();return[async function(){if(!t)throw new Error("Missing review id");await a({variables:{input:{content:n,discogsReviewId:t}}}).catch((()=>{}))},r]}({reviewId:o,content:d}),y=f.loading||h.loading,v=f.error??h.error;const _=10-d.split(/\s+/).map((e=>e.trim())).filter((e=>""!==e)).length,b=y||""===d||_>0;return r.createElement("form",{className:Sr,onSubmit:async function(e){e.preventDefault(),b||(s?await g():await E(),u(""),i?.())}},r.createElement(gn,{name:"review",className:Dr,placeholder:t._(l?{id:"Enter your reply"}:{id:"Enter your comment"}),onChange:function(e){u(e.target.value)},value:d,disabled:y}),r.createElement($r,{value:d}),""!==d&&_>0&&r.createElement("div",{className:Or},r.createElement(C.bRn,null),r.createElement(a.Trans,{id:"At least 10 words must be entered. Please enter at least {missingWords} more.",values:{missingWords:_}})),r.createElement("div",{className:Ar},r.createElement("div",null,r.createElement(it.z,{disabled:b,className:Fr,type:"submit"},s?r.createElement(a.Trans,{id:"Save Changes"}):r.createElement(a.Trans,{id:"Submit"})),l&&!s&&r.createElement(it.z,{disabled:y,className:Fr,onClick:function(){u((function(e){return l?`[quote=${l.reviewer.username}] ${l.content.markup} [/quote]\n${e}`:e}))}},r.createElement(a.Trans,{id:"Quote Previous"})),i&&r.createElement(it.z,{onClick:i,color:"red"},r.createElement(a.Trans,{id:"Cancel"})),y&&r.createElement(m.$,null),v&&r.createElement("span",{className:Pr},r.createElement(a.Trans,{id:"Something went wrong adding your review"}))),r.createElement(ee.r,{href:"/help/doc/reviews-and-discussion"},r.createElement(a.Trans,{id:"View Help"}))))}var Lr=n(4147);const Br="review_1HaTA",jr="pic_1zTVT bezel_duzEF",Vr="content_1LU7L",Ur="header_2QOCi",zr="message_22a5w",Hr="username_gIcSY",Gr="created_21oKs",Wr="button_1a9y4",qr="edited_3ihnk",Yr="rating_3YWxa",Qr="replies_3Ove7",Kr="dropdown_2frgf";function Xr(){return(Xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const Zr=(0,pe.E)((function(e){const{review:t,dispatch:n,dropdownOpen:l,showingReplies:i,isReplying:s,isEditing:c,releaseId:o,parent:d}=e,{discogsId:m,reviewer:{discogsId:u,username:E,avatarUrl:f},created:g,modified:h,content:y,foundHelpful:v,rating:_,replies:b=[]}=t,{i18n:w}=(0,p.G)(),{loggedIn:I,user:N}=(0,T.f0)(),R=function(e=!1){const[t,n]=r.useState(e),a=r.useRef(null);function l(){a.current&&(a.current(!0),n(!1))}function i(){a.current&&(a.current(!1),n(!1))}return{isOpen:t,ask:()=>(n(!0),new Promise((function(e){a.current=e}))),accept:l,cancel:i,props:{open:t,onConfirm:l,onCancel:i}}}(),[k]=function(e){const{discogsReviewId:t,parent:n,releaseId:a}=e,[r,l]=(0,he.Rx)(),i=(0,Cn.UQ)({id:"Could not remove release review"});return[async function(){await r({variables:{input:{discogsReviewId:t}},update(e,r){n?e.modify({id:e.identify({__typename:"Review",discogsId:n.discogsId}),fields:{replies(n){const a=e.identify({__typename:"Review",discogsId:t});return n.filter((e=>e.__ref!==a))}}}):e.modify({id:e.identify({__typename:"Release",discogsId:a}),fields:{reviews(n){if(!n)return n;const a=e.identify({__typename:"Review",discogsId:t});return{totalCount:n.totalCount-1,edges:n.edges.filter((e=>e.node.__ref!==a))}}}})}}).catch(i)},l]}({releaseId:o,discogsReviewId:m,parent:d}),x=new Date(g),$=new Date(h),S=`/user/${E}`;if(c)return r.createElement("div",{className:Br,id:`#review-${m}`},r.createElement(Mr,{discogsId:m,reviewId:m,isEdit:!0,initialValue:y.markup,onCancel:()=>n({type:"cancel-edit"})}));return r.createElement(r.Fragment,null,r.createElement(un,Xr({},R.props,{confirmText:r.createElement(a.Trans,{id:"Delete Review"})}),r.createElement(a.Trans,{id:"Do you really want to remove this review?"})),r.createElement("div",{className:Br,id:`#review-${m}`},r.createElement(ee.r,{href:S,className:jr},f?r.createElement("img",{src:f,alt:w._({id:"{username}'s profile picture",values:{username:E}}),width:50,height:50}):r.createElement(C.n5m,null)),r.createElement("div",{className:Vr},r.createElement("div",{className:Ur},r.createElement(ee.r,{href:S,className:Hr},E)," ",r.createElement(Z,{value:x,className:Gr}),r.createElement(Jr,{discogsId:m,open:l,onOpen:()=>n({type:"open-dropdown"}),onClose:()=>n({type:"close-dropdown"}),isAuthor:!!N&&u===N.discogsId,onRemove:async function(){await R.ask()&&await k()},onEdit:()=>n({type:"edit"})})),$.getTime()!==x.getTime()&&r.createElement("div",{className:qr},w._(function(e){const t=Math.floor((Date.now()-e.getTime())/1e3),n=Math.floor(t/31536e3),a=Math.floor(t/2592e3),r=Math.floor(t/86400),l=Math.floor(t/3600),i=Math.floor(t/60);if(n>=1)return{id:"{years, plural, one {Edited one year ago} other {Edited # years ago}}",values:{years:n}};if(a>=1)return{id:"{months, plural, one {Edited one month ago} other {Edited # months ago}}",values:{months:a}};if(r>=1)return{id:"{days, plural, one {Edited one day ago} other {Edited # days ago}}",values:{days:r}};if(l>=1)return{id:"{hours, plural, one {Edited one hour ago} other {Edited # hours ago}}",values:{hours:l}};if(i>=1)return{id:"{minutes, plural, one {Edited one minute ago} other {Edited # minutes ago}}",values:{minutes:i}};return{id:"Edited just now"}}($))),_&&r.createElement(Ka,{value:_.value,className:Yr}),r.createElement("p",{className:zr},r.createElement("span",{className:zr,dangerouslySetInnerHTML:{__html:y.html}})),r.createElement("div",null,!d&&r.createElement(it.z,{type:"button",color:"greyLink",className:Wr,onClick:function(){I?n(s?{type:"cancel-reply"}:{type:"reply"}):(0,T.x4)()}},r.createElement(C.Dnk,null)," ",r.createElement(a.Trans,{id:"Reply"})),b.length>0&&r.createElement(it.z,{type:"button",color:"greyLink",className:Wr,onClick:function(){n(i?{type:"hide-replies"}:{type:"show-replies"})}},i?r.createElement(r.Fragment,null,r.createElement(C.N6f,null)," ",r.createElement(a.Trans,{id:"Hide replies"})):r.createElement(r.Fragment,null,r.createElement(C.bAj,null)," ",w._({id:"{0, plural, one {See # reply} other {See # replies}}",values:{0:b.length}}))),r.createElement(el,{discogsId:m,foundHelpful:v,authorId:u})))),r.createElement("div",{className:Qr},s&&r.createElement(Mr,{parent:e.review,discogsId:m,onCancel:function(){n({type:"cancel-reply"})}}),i&&b.map((n=>r.createElement(Zr,Xr({},e,{review:n,key:n.discogsId,parent:t,releaseId:o}))))))}),(function(e,t,n){switch(n.type){case"open-dropdown":return{...t,dropdownOpen:!0};case"close-dropdown":return{...t,dropdownOpen:!1};case"show-replies":return{...t,showingReplies:!0};case"hide-replies":return{...t,showingReplies:!1};case"reply":return{...t,isReplying:!0};case"cancel-reply":return{...t,isReplying:!1};case"edit":return{...t,isEditing:!0,dropdownOpen:!1};case"cancel-edit":return{...t,isEditing:!1,dropdownOpen:!1};default:return t}}),{dropdownOpen:!1,showingReplies:!1,isReplying:!1,isEditing:!1});function Jr(e){const{discogsId:t,open:n,onOpen:l,onClose:i,isAuthor:s,onRemove:c,onEdit:o}=e,d=r.useRef(null);return(0,Lr.O)(d,i),r.createElement("div",{className:Kr,ref:d},r.createElement("button",{type:"button",onClick:function(){n?i():l()}},r.createElement(C.pO,null)),r.createElement("ul",{hidden:!n},s&&r.createElement("li",null,r.createElement(it.z,{onClick:o},r.createElement(C.zaA,null),r.createElement(a.Trans,{id:"Edit"}))),r.createElement("li",null,r.createElement(ee.r,{href:`/reviews/report/${t}`},r.createElement(C.KgV,null),r.createElement(a.Trans,{id:"Report"}))),s&&r.createElement("li",null,r.createElement(it.z,{onClick:c},r.createElement(C.rFk,null),r.createElement(a.Trans,{id:"Delete"})))))}function el(e){const{discogsId:t,foundHelpful:n,authorId:l}=e,{loggedIn:i,user:s}=(0,T.f0)(),[c,{loading:o}]=function(e){const{discogsReviewId:t}=e,[n,a]=(0,he._i)(),r=(0,Cn.UQ)({id:"Could not mark review as helpful"});return[async function(){await n({variables:{input:{discogsReviewId:t}},update(e,n){e.modify({id:e.identify({__typename:"Review",discogsId:t}),fields:{foundHelpful(e){const t=n.data?.toggleFoundReviewHelpful.helpful;if("boolean"!=typeof t)return e;const a=e??0,r=t?1:-1;return Math.max(0,a+r)}}})}}).catch(r)},a]}({discogsReviewId:t});const d=o?r.createElement(m.$,null):r.createElement(C.Vp9,null);return r.createElement(it.z,{type:"button",color:"greyLink",className:Wr,onClick:async function(){i?await c():(0,T.x4)()},disabled:l===s?.discogsId},d," ",n>0&&n," ",r.createElement(a.Trans,{id:"Helpful"}))}const tl="spinner_1aVDl",nl="add_2d7wa",al="all_1-RCY",rl="head_35fDG";function ll(e){const{discogsId:t,reviews:{totalCount:n,edges:l}}=e,[i,{loading:s}]=(0,he.zO)(),{loggedIn:c}=(0,T.f0)();const o=n>10&&r.createElement(ee.r,{href:`/reviews?release=${t}`,rel:"nofollow",className:al},r.createElement(a.Trans,{id:"Show All {totalCount} Reviews",values:{totalCount:n}})),d=r.createElement("div",{className:rl},r.createElement("h3",null,r.createElement(a.Trans,{id:"Reviews"})),o),E=c?r.createElement(Mr,{discogsId:t}):r.createElement(it.z,{onClick:()=>(0,T.x4)(),className:nl},r.createElement(a.Trans,{id:"Add Review"}));return r.createElement(u.$0,{header:d},E,l.map((e=>e.node&&r.createElement(Zr,{review:e.node,key:e.node.discogsId,releaseId:t}))),l.length<n&&r.createElement(it.z,{color:"link",onClick:function(){const{cursor:e}=l[l.length-1];i({variables:{discogsId:t,after:e}})},disabled:s},r.createElement(a.Trans,{id:"Load More Reviews"})),s&&r.createElement(m.$,{className:tl}))}function il(e){return{"@context":"http://schema.org","@type":"MusicRelease","@id":`https://www.discogs.com${e.siteUrl}`,name:e.title,musicReleaseFormat:e.formats?.[0]?.name??"Vinyl",genre:e.genres??void 0,description:e.notes?.html.replace(/<br>/g,"\n"),datePublished:e.released?.length&&z(e.released),catalogNumber:e.labels?.map((e=>e.catalogNumber)).filter((e=>Boolean(e))).join(", "),recordLabel:cl(e.labels?.map((function(e){const t=function(e){if("discogsId"in e.label)return`https://www.discogs.com/label/${e.label.discogsId}-${e.label.name}`;return}(e);return t&&e.labelRole===he.b7.Label?{"@type":"Organization","@id":t,name:e.label.name}:null})).filter((e=>null!==e))),releaseOf:{"@type":"MusicAlbum","@id":e.masterRelease&&`https://www.discogs.com/master/view/${e.masterRelease.discogsId}`,name:e.title,datePublished:e.released?.length&&z(e.released),byArtist:e.primaryArtists?.map((function(e){const t=function(e){if(e.artist&&"discogsId"in e.artist)return`https://www.discogs.com/artist/${e.artist.discogsId}-${ye(e.artist.name)}`;return}(e);return t&&e.artist?{"@type":"MusicGroup","@id":t,name:e.artist.name}:null})).filter((e=>null!==e))},releasedEvent:{"@type":"PublicationEvent",startDate:e.released?.length&&z(e.released),location:e.country?{"@type":"Country",name:e.country}:void 0},image:e.images.edges[0]?.node?.fullsize.sourceUrl,offers:{"@type":"AggregateOffer",offerCount:e.marketplaceListings.totalCount,priceCurrency:e.statistics.min?.currency,lowPrice:e.statistics.min?.amount,itemOffered:{"@type":"Product",name:`${sl(e.primaryArtists)}${e.title}`,aggregateRating:{"@type":"AggregateRating",ratingCount:e.ratings.totalCount,ratingValue:e.ratings.averageRating}}}}}function sl(e){return e&&0!==e.length?e.map((function(t,n){return`${t.nameVariation||t.artist?.name||""}${n<e.length-1?function(e){return e.joiningText&&","!==e.joiningText?e.joiningText:", "}(t):""}`})).join("").concat(" - "):""}function cl(e){if(!e)return;const t={};for(const n of e)t[n["@id"]??n.name]=n;return Object.values(t)}function ol(e){const t=JSON.stringify(il(e));return r.createElement("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:t},id:"release_schema"})}var dl=n(4707);const ml="optout_30dEJ";function ul(e){return(0,dl.ug)()?r.createElement("div",{className:ml},r.createElement(a.Trans,{id:"You are currently viewing the new version of the release page."}),r.createElement("br",null),r.createElement(ee.r,{href:e.siteUrl,onClick:dl.VR},r.createElement(a.Trans,{id:"Revert to the old version."}))):null}function El(e){const{languages:t,host:n}=e,{localiseURL:a}=(0,p.G)(),s=(0,i.TH)(),c=t.map((e=>r.createElement(l.rU,{key:e,rel:"alternate",hrefLang:e.replace("_","-"),href:`${n}${a(s.pathname,e)}`})));return r.createElement(r.Fragment,null,c)}var fl=n(4736);const gl="report_3dOkc";function pl(e){const{discogsId:t}=e,n=`/release/${t}/report`;return r.createElement("div",{className:gl},r.createElement(ee.r,{href:n},r.createElement(a.Trans,{id:"Report"})))}const hl="spinner_9eXPV";function yl(){return(yl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const vl=c.Mj.map((e=>e.replace("-","_"))).join("|"),_l=[`/:locale(${vl})/:slug/release/:discogsId(\\d+)`,`/:locale(${vl})/release/:discogsId(\\d+)`,"/:slug/release/:discogsId(\\d+)","/release/:discogsId(\\d+)"];function bl(){const[e,t]=r.useState(null);return[(0,s.Z)(e).isIntersecting,t]}function wl(){const e=bl(),t=bl(),n=bl(),a=bl(),l={versions:e[1],lists:t[1],recommendations:n[1],reviews:a[1]};return[function(e){const[t,n]=r.useState(e);return r.useEffect((function(){e&&n(!0)}),[e]),t}(e[0]||t[0]||n[0]||a[0]),l]}const Cl=r.createElement(j.B,{statusCode:404,message:r.createElement(a.Trans,{id:"That Release does not exist or may have been deleted."})});function Il(e){const{match:t,location:n}=e,a=parseInt(t.params.discogsId,10),{localiseURL:s,language:u}=(0,p.G)(),{blockedIds:E}=(0,h.T)(),f=a>=2**31,_=E?.includes(a)??!1,[b,w]=wl(),C=_||f,{initial:I,deferred:T,user:N}=function(e,t,n){const a={discogsId:e},[r]=(0,o.B)("sid"),[l]=(0,v.Wd)("ssr_user"),i="cache-only",[s]=(0,v.Wd)("defer"),c="1"===s||""===s,d=(0,he.ge)({skip:t||c,ssr:!0,fetchPolicy:i,errorPolicy:"all",variables:a}),m=(0,he.f1)({skip:t||!c,ssr:!0,fetchPolicy:i,errorPolicy:"all",variables:a}),u=(0,he.NP)({skip:t||!c||!n,ssr:!1,returnPartialData:!0,errorPolicy:"all",variables:a}),E=(0,he.cC)({skip:t||!r,ssr:"1"===l,returnPartialData:!0,errorPolicy:"all",variables:a});return n||(u.loading=!0),c?{initial:m,deferred:u,user:E}:{initial:d,deferred:d,user:d}}(a,C,b),R=function(e,t){const n=y(),a=(0,he.wN)({ssr:null!==n,skip:t||!n,variables:{discogsId:e,currency:n??he.F.Usd}});return{...a,loading:!n||a.loading}}(a,C),{data:k,error:x,loading:$}=I,S=T;if(x?.networkError)throw x.networkError;if(f||_)return Cl;if(!k&&!$&&!x)throw new Error("MissingFieldsError");if(!$&&k&&!k.release)return Cl;if($||!k||!k.release)return r.createElement(m.$,{className:hl,large:!0});if(t.params.slug&&t.url!==s(k.release.siteUrl,u)){const e={...n,pathname:s(k.release.siteUrl,u)};return r.createElement(i.l_,{to:e})}const{isOffensive:D,siteUrl:A}=k.release,j=x?.graphQLErrors??[],V=`https://www.discogs.com/${A}`;return r.createElement(r.Fragment,null,r.createElement(d.VY,null,r.createElement(sr,k.release),r.createElement(ol,k.release),r.createElement(or,k.release),r.createElement(El,{languages:c.Mj,host:"https://www.discogs.com"}),r.createElement(l.rU,{rel:"favicon",href:"/release-page/favicon.ico"}),r.createElement(l.h_,{name:"viewport",content:"width=device-width, initial-scale=1"}),r.createElement(G,k.release),!D&&r.createElement(F,null),r.createElement(d.YE,{order:19},r.createElement(Mn,k.release)),r.createElement(d.YE,{order:2},r.createElement(va,{discogsId:a,info:N.data?.release,user:N.data?.viewer,loading:N.loading})),r.createElement(d.YE,{order:3},r.createElement(Jn,R)),r.createElement(d.YE,{order:-1},!D&&r.createElement(P,null)),r.createElement(d.YE,{order:14},r.createElement(tr,yl({discogsId:a},N.data?.release)),!D&&r.createElement(ir,{url:V,title:k.release.title})),r.createElement(d.YE,{order:13},!D&&r.createElement(M,null)),r.createElement(d.YE,{order:12},r.createElement(Un,yl({discogsId:a},R))),r.createElement(d.YE,{order:16},r.createElement(Ha,k.release)),r.createElement(d.YE,{order:17,ref:w.lists},r.createElement(g,{component:xn,result:S,title:"Lists",minHeight:50,user:N.data?.viewer})),r.createElement(d.YE,{order:18},r.createElement(Nr,k.release)),r.createElement(d.YE,{order:19},r.createElement(ul,k.release)),r.createElement(d.YE,{order:20},r.createElement(pl,{discogsId:a})),r.createElement(d.YE,{order:5},!D&&r.createElement(O,null)),r.createElement(Nl,{errors:j},r.createElement(d.or,{order:1},r.createElement(Nl,{errors:j},r.createElement(We,k.release))),r.createElement(d.or,{order:4},r.createElement($t,k.release)),r.createElement(d.or,{order:5},r.createElement(B,null)),r.createElement(d.or,{order:6},r.createElement(tt,k.release)),r.createElement(d.or,{order:7},r.createElement(Xe,k.release)),r.createElement(d.or,{order:8},r.createElement(Ze,k.release)),r.createElement(d.or,{order:9},r.createElement(At,k.release)),r.createElement(d.or,{order:10,ref:w.versions},r.createElement(g,{component:Kt,result:S,title:"Other Versions",minHeight:320})),r.createElement(d.or,{order:11,ref:w.recommendations},r.createElement(g,{component:Ir,result:S,title:"Recommendations",minHeight:350})),r.createElement(d.or,{order:15,ref:w.reviews},r.createElement(g,{component:ll,result:S,title:"Reviews",minHeight:100})))),!D&&r.createElement(L,null))}function Tl(e){const{errors:t}=e;return 0!==t.length?r.createElement(a.Trans,{id:"Something went wrong in this section of the page. This likely happened due to data errors in this release."}):r.createElement(a.Trans,{id:"Something went wrong in this section of the page."})}function Nl(e){const{children:t,errors:n}=e;return r.createElement(fl.S,{fallback:()=>r.createElement(Tl,{errors:n})},r.createElement(r.Fragment,null,t))}}}]);
//# sourceMappingURL=947e4dbb.js.map